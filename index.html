<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>USCash - Premium Gaming Experience</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #0a2463;
            --secondary: #3e92cc;
            --accent: #2dc7ff;
            --success: #00cc66;
            --danger: #ff4d4d;
            --warning: #ffcc00;
            --dark: #0d1b2a;
            --light: #f8f9fa;
            --gray: #6c757d;
            --premium-gold: #ffd700;
            --vip-purple: #9370db;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            background: linear-gradient(135deg, #0d1b2a 0%, #1b263b 100%);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Auth Pages */
        .auth-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect fill="%230a2463" width="50" height="50"/><rect fill="%231b263b" x="50" width="50" height="50"/><rect fill="%231b263b" y="50" width="50" height="50"/><rect fill="%230a2463" x="50" y="50" width="50" height="50"/></svg>') repeat;
            background-size: 100px;
        }
        
        .auth-box {
            background: rgba(13, 27, 42, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            width: 100%;
            max-width: 450px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid var(--secondary);
        }
        
        .auth-header {
            text-align: center;
            margin-bottom: 25px;
        }
        
        .auth-header h1 {
            font-family: 'Orbitron', sans-serif;
            color: var(--accent);
            font-size: 2.5rem;
            margin-bottom: 5px;
            text-shadow: 0 0 10px rgba(45, 199, 255, 0.5);
        }
        
        .auth-header p {
            color: var(--light);
            font-size: 1rem;
        }
        
        .auth-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--secondary);
        }
        
        .auth-tab {
            padding: 12px 20px;
            cursor: pointer;
            font-weight: 600;
            color: var(--gray);
            transition: all 0.3s;
            text-align: center;
            flex: 1;
        }
        
        .auth-tab.active {
            color: var(--accent);
            border-bottom: 3px solid var(--accent);
        }
        
        .auth-form {
            display: none;
        }
        
        .auth-form.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--light);
        }
        
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid rgba(62, 146, 204, 0.3);
            border-radius: 8px;
            background: rgba(13, 27, 42, 0.7);
            color: var(--light);
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(45, 199, 255, 0.3);
        }
        
        .btn {
            display: inline-block;
            padding: 12px 25px;
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .btn:hover {
            background: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--accent) 100%);
        }
        
        .btn-block {
            width: 100%;
        }
        
        .forgot-password {
            text-align: right;
            margin-top: 10px;
        }
        
        .forgot-password a {
            color: var(--accent);
            text-decoration: none;
            font-size: 0.9rem;
        }
        
        /* Dashboard */
        .dashboard {
            display: none;
            min-height: 100vh;
        }
        
        .header {
            background: rgba(13, 27, 42, 0.8);
            backdrop-filter: blur(10px);
            padding: 15px 0;
            border-bottom: 1px solid rgba(62, 146, 204, 0.3);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
        }
        
        .logo h1 {
            font-family: 'Orbitron', sans-serif;
            color: var(--accent);
            font-size: 2rem;
            margin-left: 10px;
            text-shadow: 0 0 10px rgba(45, 199, 255, 0.5);
        }
        
        .logo-icon {
            font-size: 2rem;
            color: var(--accent);
        }
        
        .user-info {
            display: flex;
            align-items: center;
        }
        
        .balance-box {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            padding: 10px 20px;
            border-radius: 10px;
            margin-right: 20px;
            display: flex;
            align-items: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .balance-amount {
            font-weight: 700;
            font-size: 1.2rem;
            margin-right: 10px;
        }
        
        .refresh-balance {
            background: none;
            border: none;
            color: var(--light);
            cursor: pointer;
            font-size: 1rem;
        }
        
        .user-profile {
            display: flex;
            align-items: center;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: 700;
        }
        
        .vip-badge {
            background: linear-gradient(135deg, var(--warning) 0%, var(--premium-gold) 100%);
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            margin-left: 10px;
        }
        
        .marquee {
            background: linear-gradient(90deg, rgba(45, 199, 255, 0.1) 0%, rgba(45, 199, 255, 0.3) 50%, rgba(45, 199, 255, 0.1) 100%);
            padding: 10px 0;
            margin: 15px 0;
            overflow: hidden;
            white-space: nowrap;
            border-radius: 5px;
        }
        
        .marquee-content {
            display: inline-block;
            padding-left: 100%;
            animation: marquee 20s linear infinite;
            color: var(--accent);
            font-weight: 500;
        }
        
        @keyframes marquee {
            0% { transform: translate(0, 0); }
            100% { transform: translate(-100%, 0); }
        }
        
        .welcome-banner {
            background: linear-gradient(135deg, rgba(13, 27, 42, 0.7) 0%, rgba(27, 38, 59, 0.7) 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
            border: 1px solid rgba(62, 146, 204, 0.3);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .welcome-banner h2 {
            font-family: 'Orbitron', sans-serif;
            color: var(--accent);
            margin-bottom: 15px;
            font-size: 2rem;
        }
        
        .welcome-banner p {
            color: var(--light);
            font-size: 1.1rem;
            max-width: 700px;
            margin: 0 auto;
        }
        
        .dashboard-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .action-card {
            background: rgba(13, 27, 42, 0.7);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s;
            border: 1px solid rgba(62, 146, 204, 0.3);
            cursor: pointer;
        }
        
        .action-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            border-color: var(--accent);
        }
        
        .action-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--accent);
        }
        
        .action-card h3 {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: var(--light);
        }
        
        .action-card p {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            overflow-y: auto;
        }
        
        .modal-content {
            background: rgba(13, 27, 42, 0.95);
            margin: 50px auto;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.7);
            border: 2px solid var(--accent);
            overflow: hidden;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: rgba(10, 36, 99, 0.8);
            border-bottom: 1px solid var(--secondary);
        }
        
        .modal-title {
            font-family: 'Orbitron', sans-serif;
            color: var(--accent);
            font-size: 1.5rem;
        }
        
        .close-modal {
            background: none;
            border: none;
            color: var(--light);
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .modal-body {
            padding: 20px;
        }
        
        /* Admin Panel */
        .admin-panel {
            display: none;
            min-height: 100vh;
        }
        
        .admin-header {
            background: rgba(13, 27, 42, 0.8);
            backdrop-filter: blur(10px);
            padding: 15px 0;
            border-bottom: 1px solid rgba(62, 146, 204, 0.3);
        }
        
        .admin-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .admin-card {
            background: rgba(13, 27, 42, 0.7);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s;
            border: 1px solid rgba(62, 146, 204, 0.3);
            cursor: pointer;
        }
        
        .admin-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            border-color: var(--accent);
        }
        
        .admin-icon {
            font-size: 2rem;
            margin-bottom: 15px;
            color: var(--accent);
        }
        
        .admin-card h3 {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: var(--light);
        }
        
        /* Admin Tables */
        .admin-table-container {
            background: rgba(13, 27, 42, 0.7);
            border-radius: 15px;
            padding: 20px;
            margin: 30px 0;
            border: 1px solid rgba(62, 146, 204, 0.3);
            overflow-x: auto;
        }
        
        .admin-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .admin-table th, .admin-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid rgba(62, 146, 204, 0.3);
        }
        
        .admin-table th {
            background: rgba(10, 36, 99, 0.5);
            color: var(--accent);
            font-weight: 600;
        }
        
        .admin-table tr:hover {
            background: rgba(10, 36, 99, 0.2);
        }
        
        .status-pending {
            color: var(--warning);
            font-weight: 600;
        }
        
        .status-approved {
            color: var(--success);
            font-weight: 600;
        }
        
        .status-rejected {
            color: var(--danger);
            font-weight: 600;
        }
        
        .action-btn {
            padding: 6px 12px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            margin-right: 5px;
        }
        
        .btn-approve {
            background: var(--success);
            color: white;
        }
        
        .btn-reject {
            background: var(--danger);
            color: white;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .dashboard-actions, .admin-actions {
                grid-template-columns: 1fr;
            }
            
            .user-info {
                flex-direction: column;
                align-items: flex-end;
            }
            
            .balance-box {
                margin-right: 0;
                margin-bottom: 10px;
            }
            
            .game-modal, .modal-content {
                width: 95%;
                height: 85%;
            }
            
            .admin-table th, .admin-table td {
                padding: 8px 10px;
            }
        }
        
        /* Notifications */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background: var(--success);
            color: white;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            display: none;
            max-width: 350px;
        }
        
        .notification.error {
            background: var(--danger);
        }
        
        /* Loading Spinner */
        .spinner {
            width: 40px;
            height: 40px;
            margin: 20px auto;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid var(--accent);
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Side Menu */
        .side-menu {
            position: fixed;
            top: 0;
            right: -300px;
            width: 300px;
            height: 100%;
            background: rgba(13, 27, 42, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            transition: right 0.3s;
            padding: 20px;
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.3);
            border-left: 1px solid var(--secondary);
        }
        
        .side-menu.open {
            right: 0;
        }
        
        .menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--secondary);
        }
        
        .menu-title {
            font-family: 'Orbitron', sans-serif;
            color: var(--accent);
        }
        
        .close-menu {
            background: none;
            border: none;
            color: var(--light);
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .menu-item {
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            background: rgba(10, 36, 99, 0.5);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .menu-item:hover {
            background: rgba(10, 36, 99, 0.8);
            transform: translateX(-5px);
        }
        
        .menu-item i {
            margin-right: 10px;
            color: var(--accent);
        }
        
        .menu-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(10, 36, 99, 0.8);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--light);
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 900;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
    </style>
</head>
<body>
    <!-- Authentication Section -->
    <div class="auth-container" id="auth-container">
        <div class="auth-box">
            <div class="auth-header">
                <h1><i class="fas fa-coins"></i> USCash</h1>
                <p>Premium Gaming Experience</p>
            </div>
            
            <div class="auth-tabs">
                <div class="auth-tab active" data-tab="login">Login</div>
                <div class="auth-tab" data-tab="signup">Sign Up</div>
            </div>
            
            <div class="auth-form active" id="login-form">
                <div class="form-group">
                    <label for="login-email">Email</label>
                    <input type="email" id="login-email" placeholder="Enter your email">
                </div>
                
                <div class="form-group">
                    <label for="login-password">Password</label>
                    <input type="password" id="login-password" placeholder="Enter your password">
                </div>
                
                <button class="btn btn-primary btn-block" id="login-btn">Login</button>
                
                <div class="forgot-password">
                    <a href="#" id="forgot-password-link">Forgot Password?</a>
                </div>
            </div>
            
            <div class="auth-form" id="signup-form">
                <div class="form-group">
                    <label for="signup-name">Full Name</label>
                    <input type="text" id="signup-name" placeholder="Enter your full name">
                </div>
                
                <div class="form-group">
                    <label for="signup-email">Email</label>
                    <input type="email" id="signup-email" placeholder="Enter your email">
                </div>
                
                <div class="form-group">
                    <label for="signup-phone">Phone Number</label>
                    <input type="tel" id="signup-phone" placeholder="Enter your phone number">
                </div>
                
                <div class="form-group">
                    <label for="signup-password">Password</label>
                    <input type="password" id="signup-password" placeholder="Create a password">
                </div>
                
                <div class="form-group">
                    <label for="signup-confirm-password">Confirm Password</label>
                    <input type="password" id="signup-confirm-password" placeholder="Confirm your password">
                </div>
                
                <div class="form-group">
                    <label for="signup-referral">Referral Code (Optional)</label>
                    <input type="text" id="signup-referral" placeholder="Enter referral code if any">
                </div>
                
                <button class="btn btn-primary btn-block" id="signup-btn">Create Account</button>
            </div>
            
            <div class="auth-form" id="forgot-password-form">
                <div class="form-group">
                    <label for="forgot-email">Email</label>
                    <input type="email" id="forgot-email" placeholder="Enter your email">
                </div>
                
                <button class="btn btn-primary btn-block" id="reset-password-btn">Reset Password</button>
                
                <div class="forgot-password">
                    <a href="#" id="back-to-login">Back to Login</a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Dashboard Section -->
    <div class="dashboard" id="dashboard">
        <header class="header">
            <div class="container header-content">
                <div class="logo">
                    <i class="fas fa-coins logo-icon"></i>
                    <h1>USCash</h1>
                </div>
                
                <div class="user-info">
                    <div class="balance-box">
                        <span class="balance-amount">RS 0.00</span>
                        <button class="refresh-balance"><i class="fas fa-sync-alt"></i></button>
                    </div>
                    
                    <div class="user-profile">
                        <div class="user-avatar">U</div>
                        <div class="user-details">
                            <div class="username">User Name</div>
                            <div class="vip-badge">VIP 0</div>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        
        <div class="container">
            <div class="marquee">
                <div class="marquee-content" id="marquee-text">
                    For deposits contact VIP 2 users, We are working on deposit methods soon we will update you guys thanks for your patience
                </div>
            </div>
            
            <div class="welcome-banner">
                <h2>Welcome, <span id="user-greeting">User</span>!</h2>
                <p>Experience the world-class gaming platform with exciting rewards and premium games.</p>
            </div>
            
            <div class="dashboard-actions">
                <div class="action-card" data-action="deposit">
                    <i class="fas fa-money-bill-wave action-icon"></i>
                    <h3>Deposit</h3>
                    <p>Add funds to your account (Minimum RS 150)</p>
                </div>
                
                <div class="action-card" data-action="withdraw">
                    <i class="fas fa-wallet action-icon"></i>
                    <h3>Withdraw</h3>
                    <p>Withdraw your earnings (Minimum RS 300)</p>
                </div>
                
                <div class="action-card" data-action="watch-earn">
                    <i class="fas fa-video action-icon"></i>
                    <h3>Watch & Earn</h3>
                    <p>Watch ads and earn money (Unlock for RS 150)</p>
                </div>
                
                <div class="action-card" data-action="refer-earn">
                    <i class="fas fa-users action-icon"></i>
                    <h3>Refer & Earn</h3>
                    <p>Refer friends and earn rewards</p>
                </div>
                
                <div class="action-card" data-action="games">
                    <i class="fas fa-gamepad action-icon"></i>
                    <h3>Games</h3>
                    <p>Play premium games and win big</p>
                </div>
                
                <div class="action-card" data-action="announcements">
                    <i class="fas fa-bullhorn action-icon"></i>
                    <h3>Announcements</h3>
                    <p>Check latest updates and announcements</p>
                </div>
            </div>
        </div>
        
        <button class="menu-toggle" id="menu-toggle">
            <i class="fas fa-bars"></i>
        </button>
        
        <div class="side-menu" id="side-menu">
            <div class="menu-header">
                <h3 class="menu-title">Menu</h3>
                <button class="close-menu" id="close-menu">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="menu-item" id="customer-service-btn">
                <i class="fas fa-headset"></i> Customer Service
            </div>
            
            <div class="menu-item">
                <i class="fas fa-history"></i> Game History
            </div>
            
            <div class="menu-item">
                <i class="fas fa-bell"></i> Upcoming Updates
            </div>
            
            <div class="menu-item">
                <i class="fab fa-whatsapp"></i> WhatsApp Channel
            </div>
            
            <div class="menu-item" id="admin-login-btn">
                <i class="fas fa-lock"></i> Admin Login
            </div>
            
            <div class="menu-item" id="logout-btn">
                <i class="fas fa-sign-out-alt"></i> Logout
            </div>
        </div>
    </div>
    
    <!-- Admin Panel Section -->
    <div class="admin-panel" id="admin-panel">
        <header class="admin-header">
            <div class="container header-content">
                <div class="logo">
                    <i class="fas fa-lock logo-icon"></i>
                    <h1>USCash Admin</h1>
                </div>
                
                <div class="user-info">
                    <div class="user-profile">
                        <div class="user-avatar">A</div>
                        <div class="user-details">
                            <div class="username">Admin</div>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        
        <div class="container">
            <div class="welcome-banner">
                <h2>Admin Dashboard</h2>
                <p>Manage users, transactions, and platform settings.</p>
            </div>
            
            <div class="admin-actions">
                <div class="admin-card" data-action="manage-users">
                    <i class="fas fa-users admin-icon"></i>
                    <h3>Manage Users</h3>
                </div>
                
                <div class="admin-card" data-action="deposit-requests">
                    <i class="fas fa-money-bill-wave admin-icon"></i>
                    <h3>Deposit Requests</h3>
                </div>
                
                <div class="admin-card" data-action="withdrawal-requests">
                    <i class="fas fa-wallet admin-icon"></i>
                    <h3>Withdrawal Requests</h3>
                </div>
                
                <div class="admin-card" data-action="customer-service">
                    <i class="fas fa-headset admin-icon"></i>
                    <h3>Customer Service</h3>
                </div>
                
                <div class="admin-card" data-action="send-announcement">
                    <i class="fas fa-bullhorn admin-icon"></i>
                    <h3>Send Announcement</h3>
                </div>
                
                <div class="admin-card" data-action="marquee-text">
                    <i class="fas fa-scroll admin-icon"></i>
                    <h3>Update Marquee Text</h3>
                </div>
                
                <div class="admin-card" id="back-to-user">
                    <i class="fas fa-sign-out-alt admin-icon"></i>
                    <h3>Back to User View</h3>
                </div>
            </div>
            
            <!-- Admin Content Areas -->
            <div id="admin-users-content" class="admin-table-container" style="display: none;">
                <h3>Manage Users</h3>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Balance</th>
                            <th>VIP Level</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="users-table-body">
                        <!-- Users will be populated here -->
                    </tbody>
                </table>
            </div>
            
            <div id="admin-deposits-content" class="admin-table-container" style="display: none;">
                <h3>Deposit Requests</h3>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>User</th>
                            <th>Amount</th>
                            <th>Method</th>
                            <th>Transaction ID</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="deposits-table-body">
                        <!-- Deposits will be populated here -->
                    </tbody>
                </table>
            </div>
            
            <div id="admin-withdrawals-content" class="admin-table-container" style="display: none;">
                <h3>Withdrawal Requests</h3>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>User</th>
                            <th>Amount</th>
                            <th>Method</th>
                            <th>Account</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="withdrawals-table-body">
                        <!-- Withdrawals will be populated here -->
                    </tbody>
                </table>
            </div>
            
            <div id="admin-customer-service-content" class="admin-table-container" style="display: none;">
                <h3>Customer Service Requests</h3>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>User</th>
                            <th>Subject</th>
                            <th>Message</th>
                            <th>Date</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="customer-service-table-body">
                        <!-- Customer service requests will be populated here -->
                    </tbody>
                </table>
            </div>
            
            <div id="admin-announcement-content" class="admin-table-container" style="display: none;">
                <h3>Send Announcement</h3>
                <div class="form-group">
                    <label for="announcement-title">Title</label>
                    <input type="text" id="announcement-title" placeholder="Enter announcement title">
                </div>
                <div class="form-group">
                    <label for="announcement-content">Content</label>
                    <textarea id="announcement-content" rows="5" placeholder="Enter announcement content"></textarea>
                </div>
                <button class="btn btn-primary" id="send-announcement-btn">Send Announcement</button>
            </div>
            
            <div id="admin-marquee-content" class="admin-table-container" style="display: none;">
                <h3>Update Marquee Text</h3>
                <div class="form-group">
                    <label for="marquee-content">Marquee Text</label>
                    <input type="text" id="marquee-content-input" placeholder="Enter marquee text">
                </div>
                <button class="btn btn-primary" id="update-marquee-btn">Update Marquee</button>
            </div>
        </div>
    </div>
    
    <!-- Deposit Modal -->
    <div class="modal" id="deposit-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Deposit Funds</h3>
                <button class="close-modal" data-modal="deposit-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="deposit-account-name">Account Name</label>
                    <input type="text" id="deposit-account-name" placeholder="Enter account name">
                </div>
                
                <div class="form-group">
                    <label for="deposit-method">Payment Method</label>
                    <select id="deposit-method">
                        <option value="jazzcash">JazzCash</option>
                        <option value="easypaisa">EasyPaisa</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="deposit-amount">Amount (Minimum RS 150)</label>
                    <input type="number" id="deposit-amount" min="150" placeholder="Enter amount">
                </div>
                
                <div class="form-group">
                    <label for="deposit-transaction-id">Transaction ID</label>
                    <input type="text" id="deposit-transaction-id" placeholder="Enter transaction ID">
                </div>
                
                <button class="btn btn-primary btn-block" id="submit-deposit">Submit Deposit Request</button>
            </div>
        </div>
    </div>
    
    <!-- Withdrawal Modal -->
    <div class="modal" id="withdraw-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Withdraw Funds</h3>
                <button class="close-modal" data-modal="withdraw-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="withdraw-account-name">Account Name</label>
                    <input type="text" id="withdraw-account-name" placeholder="Enter account name">
                </div>
                
                <div class="form-group">
                    <label for="withdraw-account-number">Account Number</label>
                    <input type="text" id="withdraw-account-number" placeholder="Enter account number">
                </div>
                
                <div class="form-group">
                    <label for="withdraw-method">Payment Method</label>
                    <select id="withdraw-method">
                        <option value="jazzcash">JazzCash</option>
                        <option value="easypaisa">EasyPaisa</option>
                        <option value="nayapay">Naya Pay</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="withdraw-amount">Amount (Minimum RS 300)</label>
                    <input type="number" id="withdraw-amount" min="300" placeholder="Enter amount">
                </div>
                
                <button class="btn btn-primary btn-block" id="submit-withdrawal">Submit Withdrawal Request</button>
            </div>
        </div>
    </div>
    
    <!-- Customer Service Modal -->
    <div class="modal" id="customer-service-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Customer Service</h3>
                <button class="close-modal" data-modal="customer-service-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="customer-subject">Subject</label>
                    <input type="text" id="customer-subject" placeholder="Enter subject">
                </div>
                
                <div class="form-group">
                    <label for="customer-message">Message</label>
                    <textarea id="customer-message" rows="5" placeholder="Enter your message"></textarea>
                </div>
                
                <button class="btn btn-primary btn-block" id="submit-customer-service">Send Message</button>
            </div>
        </div>
    </div>
    
    <!-- Notification -->
    <div class="notification" id="notification">
        Operation completed successfully!
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
        import { 
            getAuth, 
            createUserWithEmailAndPassword, 
            signInWithEmailAndPassword, 
            sendPasswordResetEmail,
            onAuthStateChanged,
            signOut
        } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-auth.js";
        import { 
            getFirestore, 
            doc, 
            setDoc, 
            getDoc, 
            updateDoc,
            collection,
            addDoc,
            query,
            where,
            getDocs,
            onSnapshot,
            serverTimestamp,
            orderBy
        } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-firestore.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBM7DY6i11IPk8DAvVA6tsgmz7Epi5bJh0",
            authDomain: "pakcashplay.firebaseapp.com",
            projectId: "pakcashplay",
            storageBucket: "pakcashplay.firebasestorage.app",
            messagingSenderId: "551195851632",
            appId: "1:551195851632:web:4dcf6a8fb36d82e6a6adb5"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // DOM Elements
        const authContainer = document.getElementById('auth-container');
        const dashboard = document.getElementById('dashboard');
        const adminPanel = document.getElementById('admin-panel');
        const authTabs = document.querySelectorAll('.auth-tab');
        const authForms = document.querySelectorAll('.auth-form');
        const loginForm = document.getElementById('login-form');
        const signupForm = document.getElementById('signup-form');
        const forgotPasswordForm = document.getElementById('forgot-password-form');
        const loginBtn = document.getElementById('login-btn');
        const signupBtn = document.getElementById('signup-btn');
        const resetPasswordBtn = document.getElementById('reset-password-btn');
        const forgotPasswordLink = document.getElementById('forgot-password-link');
        const backToLogin = document.getElementById('back-to-login');
        const notification = document.getElementById('notification');
        const balanceAmount = document.querySelector('.balance-amount');
        const refreshBalanceBtn = document.querySelector('.refresh-balance');
        const userGreeting = document.getElementById('user-greeting');
        const usernameDisplay = document.querySelector('.username');
        const userAvatar = document.querySelector('.user-avatar');
        const menuToggle = document.getElementById('menu-toggle');
        const sideMenu = document.getElementById('side-menu');
        const closeMenuBtn = document.getElementById('close-menu');
        const adminLoginBtn = document.getElementById('admin-login-btn');
        const logoutBtn = document.getElementById('logout-btn');
        const backToUserBtn = document.getElementById('back-to-user');
        const depositModal = document.getElementById('deposit-modal');
        const withdrawModal = document.getElementById('withdraw-modal');
        const customerServiceModal = document.getElementById('customer-service-modal');
        const closeModalBtns = document.querySelectorAll('.close-modal');
        const submitDepositBtn = document.getElementById('submit-deposit');
        const submitWithdrawalBtn = document.getElementById('submit-withdrawal');
        const submitCustomerServiceBtn = document.getElementById('submit-customer-service');
        const customerServiceBtn = document.getElementById('customer-service-btn');
        const actionCards = document.querySelectorAll('.action-card');
        const adminCards = document.querySelectorAll('.admin-card');
        const marqueeText = document.getElementById('marquee-text');

        // Admin content areas
        const adminUsersContent = document.getElementById('admin-users-content');
        const adminDepositsContent = document.getElementById('admin-deposits-content');
        const adminWithdrawalsContent = document.getElementById('admin-withdrawals-content');
        const adminCustomerServiceContent = document.getElementById('admin-customer-service-content');
        const adminAnnouncementContent = document.getElementById('admin-announcement-content');
        const adminMarqueeContent = document.getElementById('admin-marquee-content');
        const sendAnnouncementBtn = document.getElementById('send-announcement-btn');
        const updateMarqueeBtn = document.getElementById('update-marquee-btn');

        // Auth Tab Switching
        authTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.getAttribute('data-tab');
                
                // Update active tab
                authTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Show corresponding form
                authForms.forEach(form => form.classList.remove('active'));
                document.getElementById(`${tabId}-form`).classList.add('active');
            });
        });

        // Forgot Password Link
        forgotPasswordLink.addEventListener('click', (e) => {
            e.preventDefault();
            authForms.forEach(form => form.classList.remove('active'));
            forgotPasswordForm.classList.add('active');
        });

        // Back to Login
        backToLogin.addEventListener('click', (e) => {
            e.preventDefault();
            authForms.forEach(form => form.classList.remove('active'));
            loginForm.classList.add('active');
            authTabs.forEach(t => t.classList.remove('active'));
            document.querySelector('[data-tab="login"]').classList.add('active');
        });

        // Sign Up Functionality
        signupBtn.addEventListener('click', async () => {
            const name = document.getElementById('signup-name').value;
            const email = document.getElementById('signup-email').value;
            const phone = document.getElementById('signup-phone').value;
            const password = document.getElementById('signup-password').value;
            const confirmPassword = document.getElementById('signup-confirm-password').value;
            const referralCode = document.getElementById('signup-referral').value;

            // Validation
            if (!name || !email || !phone || !password || !confirmPassword) {
                showNotification('Please fill all fields', 'error');
                return;
            }

            if (password !== confirmPassword) {
                showNotification('Passwords do not match', 'error');
                return;
            }

            if (password.length < 6) {
                showNotification('Password must be at least 6 characters', 'error');
                return;
            }

            try {
                // Create user with email and password
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                const user = userCredential.user;

                // Create user document in Firestore
                await setDoc(doc(db, "users", user.uid), {
                    name: name,
                    email: email,
                    phone: phone,
                    balance: 0,
                    vip: 0,
                    referrals: 0,
                    referralEarnings: 0,
                    watchAndEarn: false,
                    referralCode: generateReferralCode(),
                    referredBy: referralCode || null,
                    createdAt: serverTimestamp()
                });

                showNotification('Account created successfully!');
                
                // Switch to login form
                authForms.forEach(form => form.classList.remove('active'));
                loginForm.classList.add('active');
                authTabs.forEach(t => t.classList.remove('active'));
                document.querySelector('[data-tab="login"]').classList.add('active');
                
            } catch (error) {
                showNotification(error.message, 'error');
            }
        });

        // Login Functionality
        loginBtn.addEventListener('click', async () => {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;

            if (!email || !password) {
                showNotification('Please enter email and password', 'error');
                return;
            }

            try {
                // Show loading
                loginBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Logging in...';
                loginBtn.disabled = true;
                
                const userCredential = await signInWithEmailAndPassword(auth, email, password);
                const user = userCredential.user;
                
                showNotification('Login successful!');
                
                // Check if admin user
                if (['cptanil1995@gmail.com', 'auk5562@gmail.com', 'kafe2999@gmail.com'].includes(email)) {
                    showAdminPanel();
                    loadAdminData();
                } else {
                    // Load user data and show dashboard
                    loadUserData(user.uid);
                }
                
            } catch (error) {
                showNotification(error.message, 'error');
                loginBtn.innerHTML = 'Login';
                loginBtn.disabled = false;
            }
        });

        // Reset Password Functionality
        resetPasswordBtn.addEventListener('click', async () => {
            const email = document.getElementById('forgot-email').value;

            if (!email) {
                showNotification('Please enter your email', 'error');
                return;
            }

            try {
                await sendPasswordResetEmail(auth, email);
                showNotification('Password reset email sent! Check your inbox.');
            } catch (error) {
                showNotification(error.message, 'error');
            }
        });

        // Menu Toggle
        menuToggle.addEventListener('click', () => {
            sideMenu.classList.add('open');
        });

        closeMenuBtn.addEventListener('click', () => {
            sideMenu.classList.remove('open');
        });

        // Customer Service Button
        customerServiceBtn.addEventListener('click', () => {
            sideMenu.classList.remove('open');
            customerServiceModal.style.display = 'block';
        });

        // Admin Login
        adminLoginBtn.addEventListener('click', () => {
            sideMenu.classList.remove('open');
            showNotification('Please log in with your admin credentials');
            // Switch to login form
            dashboard.style.display = 'none';
            authContainer.style.display = 'flex';
            authForms.forEach(form => form.classList.remove('active'));
            loginForm.classList.add('active');
            authTabs.forEach(t => t.classList.remove('active'));
            document.querySelector('[data-tab="login"]').class.classList.add('active');
        });

        // Logout
        logoutBtn.addEventListener('click', async () => {
            try {
                await signOut(auth);
                sideMenu.classList.remove('open');
                showNotification('Logged out successfully');
            } catch (error) {
                showNotification(error.message, 'error');
            }
        });

        // Back to User View from Admin
        backToUserBtn.addEventListener('click', () => {
            adminPanel.style.display = 'none';
            dashboard.style.display = 'block';
            // Hide all admin content areas
            document.querySelectorAll('.admin-table-container').forEach(el => {
                el.style.display = 'none';
            });
        });

        // Close Modals
        closeModalBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const modalId = btn.getAttribute('data-modal');
                document.getElementById(modalId).style.display = 'none';
            });
        });

        // Action Cards Click
        actionCards.forEach(card => {
            card.addEventListener('click', () => {
                const action = card.getAttribute('data-action');
                
                switch(action) {
                    case 'deposit':
                        depositModal.style.display = 'block';
                        break;
                    case 'withdraw':
                        withdrawModal.style.display = 'block';
                        break;
                    case 'watch-earn':
                        showWatchEarn();
                        break;
                    case 'refer-earn':
                        showReferEarn();
                        break;
                    case 'games':
                        showGames();
                        break;
                    case 'announcements':
                        showAnnouncements();
                        break;
                }
            });
        });

        // Admin Cards Click
        adminCards.forEach(card => {
            card.addEventListener('click', () => {
                const action = card.getAttribute('data-action');
                
                // Hide all admin content areas first
                document.querySelectorAll('.admin-table-container').forEach(el => {
                    el.style.display = 'none';
                });
                
                switch(action) {
                    case 'manage-users':
                        adminUsersContent.style.display = 'block';
                        loadAdminUsers();
                        break;
                    case 'deposit-requests':
                        adminDepositsContent.style.display = 'block';
                        loadAdminDeposits();
                        break;
                    case 'withdrawal-requests':
                        adminWithdrawalsContent.style.display = 'block';
                        loadAdminWithdrawals();
                        break;
                    case 'customer-service':
                        adminCustomerServiceContent.style.display = 'block';
                        loadAdminCustomerService();
                        break;
                    case 'send-announcement':
                        adminAnnouncementContent.style.display = 'block';
                        break;
                    case 'marquee-text':
                        adminMarqueeContent.style.display = 'block';
                        break;
                }
            });
        });

        // Submit Deposit
        submitDepositBtn.addEventListener('click', async () => {
            const accountName = document.getElementById('deposit-account-name').value;
            const method = document.getElementById('deposit-method').value;
            const amount = parseInt(document.getElementById('deposit-amount').value);
            const transactionId = document.getElementById('deposit-transaction-id').value;

            if (!accountName || !amount || !transactionId) {
                showNotification('Please fill all fields', 'error');
                return;
            }

            if (amount < 150) {
                showNotification('Minimum deposit amount is RS 150', 'error');
                return;
            }

            try {
                const user = auth.currentUser;
                if (!user) {
                    showNotification('You must be logged in to deposit', 'error');
                    return;
                }

                // Add deposit request to Firestore
                await addDoc(collection(db, "deposits"), {
                    userId: user.uid,
                    userName: user.displayName || 'Unknown',
                    accountName: accountName,
                    method: method,
                    amount: amount,
                    transactionId: transactionId,
                    status: 'pending',
                    createdAt: serverTimestamp()
                });

                showNotification('Deposit request submitted successfully! Please wait for approval.');
                depositModal.style.display = 'none';
                
                // Clear form
                document.getElementById('deposit-account-name').value = '';
                document.getElementById('deposit-amount').value = '';
                document.getElementById('deposit-transaction-id').value = '';
                
            } catch (error) {
                showNotification(error.message, 'error');
            }
        });

        // Submit Withdrawal
        submitWithdrawalBtn.addEventListener('click', async () => {
            const accountName = document.getElementById('withdraw-account-name').value;
            const accountNumber = document.getElementById('withdraw-account-number').value;
            const method = document.getElementById('withdraw-method').value;
            const amount = parseInt(document.getElementById('withdraw-amount').value);

            if (!accountName || !accountNumber || !amount) {
                showNotification('Please fill all fields', 'error');
                return;
            }

            if (amount < 300) {
                showNotification('Minimum withdrawal amount is RS 300', 'error');
                return;
            }

            try {
                const user = auth.currentUser;
                if (!user) {
                    showNotification('You must be logged in to withdraw', 'error');
                    return;
                }

                // Check if user has sufficient balance
                const userDoc = await getDoc(doc(db, "users", user.uid));
                if (userDoc.exists()) {
                    const userData = userDoc.data();
                    if (userData.balance < amount) {
                        showNotification('Insufficient balance', 'error');
                        return;
                    }

                    // Add withdrawal request to Firestore
                    await addDoc(collection(db, "withdrawals"), {
                        userId: user.uid,
                        userName: userData.name,
                        accountName: accountName,
                        accountNumber: accountNumber,
                        method: method,
                        amount: amount,
                        status: 'pending',
                        createdAt: serverTimestamp()
                    });

                    showNotification('Withdrawal request submitted successfully! Please wait for approval.');
                    withdrawModal.style.display = 'none';
                    
                    // Clear form
                    document.getElementById('withdraw-account-name').value = '';
                    document.getElementById('withdraw-account-number').value = '';
                    document.getElementById('withdraw-amount').value = '';
                }
                
            } catch (error) {
                showNotification(error.message, 'error');
            }
        });

        // Submit Customer Service Request
        submitCustomerServiceBtn.addEventListener('click', async () => {
            const subject = document.getElementById('customer-subject').value;
            const message = document.getElementById('customer-message').value;

            if (!subject || !message) {
                showNotification('Please fill all fields', 'error');
                return;
            }

            try {
                const user = auth.currentUser;
                if (!user) {
                    showNotification('You must be logged in to contact customer service', 'error');
                    return;
                }

                // Get user data
                const userDoc = await getDoc(doc(db, "users", user.uid));
                if (userDoc.exists()) {
                    const userData = userDoc.data();
                    
                    // Add customer service request to Firestore
                    await addDoc(collection(db, "customer_service"), {
                        userId: user.uid,
                        userName: userData.name,
                        userEmail: userData.email,
                        subject: subject,
                        message: message,
                        status: 'new',
                        createdAt: serverTimestamp(),
                        adminEmail: 'kafe2999@gmail.com' // Send to admin
                    });

                    showNotification('Your message has been sent to customer service! We will respond soon.');
                    customerServiceModal.style.display = 'none';
                    
                    // Clear form
                    document.getElementById('customer-subject').value = '';
                    document.getElementById('customer-message').value = '';
                }
                
            } catch (error) {
                showNotification(error.message, 'error');
            }
        });

        // Send Announcement
        sendAnnouncementBtn.addEventListener('click', async () => {
            const title = document.getElementById('announcement-title').value;
            const content = document.getElementById('announcement-content').value;

            if (!title || !content) {
                showNotification('Please fill all fields', 'error');
                return;
            }

            try {
                // Add announcement to Firestore
                await addDoc(collection(db, "announcements"), {
                    title: title,
                    content: content,
                    createdAt: serverTimestamp()
                });

                showNotification('Announcement sent successfully!');
                
                // Clear form
                document.getElementById('announcement-title').value = '';
                document.getElementById('announcement-content').value = '';
                
            } catch (error) {
                showNotification(error.message, 'error');
            }
        });

        // Update Marquee Text
        updateMarqueeBtn.addEventListener('click', async () => {
            const marqueeContent = document.getElementById('marquee-content-input').value;

            if (!marqueeContent) {
                showNotification('Please enter marquee text', 'error');
                return;
            }

            try {
                // Update marquee in Firestore (we'll use a special document for this)
                await setDoc(doc(db, "settings", "marquee"), {
                    text: marqueeContent,
                    updatedAt: serverTimestamp()
                });

                showNotification('Marquee text updated successfully!');
                
                // Update the marquee display immediately
                marqueeText.textContent = marqueeContent;
                
            } catch (error) {
                showNotification(error.message, 'error');
            }
        });

        // Refresh Balance
        refreshBalanceBtn.addEventListener('click', async () => {
            try {
                const user = auth.currentUser;
                if (!user) return;
                
                refreshBalanceBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
                
                // Get updated user data
                const docRef = doc(db, "users", user.uid);
                const docSnap = await getDoc(docRef);

                if (docSnap.exists()) {
                    const userData = docSnap.data();
                    balanceAmount.textContent = `RS ${userData.balance.toFixed(2)}`;
                    showNotification('Balance refreshed');
                }
                
                refreshBalanceBtn.innerHTML = '<i class="fas fa-sync-alt"></i>';
            } catch (error) {
                showNotification(error.message, 'error');
                refreshBalanceBtn.innerHTML = '<i class="fas fa-sync-alt"></i>';
            }
        });

        // Check Auth State
        onAuthStateChanged(auth, (user) => {
            if (user) {
                // Check if admin user
                if (['cptanil1995@gmail.com', 'auk5562@gmail.com', 'kafe2999@gmail.com'].includes(user.email)) {
                    showAdminPanel();
                    loadAdminData();
                } else {
                    loadUserData(user.uid);
                }
            } else {
                authContainer.style.display = 'flex';
                dashboard.style.display = 'none';
                adminPanel.style.display = 'none';
            }
        });

        // Load User Data
        async function loadUserData(uid) {
            try {
                const docRef = doc(db, "users", uid);
                const docSnap = await getDoc(docRef);

                if (docSnap.exists()) {
                    const userData = docSnap.data();
                    
                    // Update UI with user data
                    balanceAmount.textContent = `RS ${userData.balance.toFixed(2)}`;
                    userGreeting.textContent = userData.name;
                    usernameDisplay.textContent = userData.name;
                    userAvatar.textContent = userData.name.charAt(0).toUpperCase();
                    
                    // Update VIP badge
                    const vipBadge = document.querySelector('.vip-badge');
                    vipBadge.textContent = `VIP ${userData.vip}`;
                    
                    // Show dashboard
                    authContainer.style.display = 'none';
                    dashboard.style.display = 'block';
                }

                // Load marquee text
                loadMarqueeText();
            } catch (error) {
                showNotification(error.message, 'error');
            }
        }

        // Load Marquee Text
        async function loadMarqueeText() {
            try {
                const docRef = doc(db, "settings", "marquee");
                const docSnap = await getDoc(docRef);
                
                if (docSnap.exists()) {
                    const data = docSnap.data();
                    marqueeText.textContent = data.text;
                }
            } catch (error) {
                console.error("Error loading marquee text:", error);
            }
        }

        // Load Admin Data
        async function loadAdminData() {
            // Load marquee text for admin panel too
            loadMarqueeText();
        }

        // Load Admin Users
        async function loadAdminUsers() {
            try {
                const usersTableBody = document.getElementById('users-table-body');
                usersTableBody.innerHTML = '<tr><td colspan="5" class="text-center">Loading users...</td></tr>';
                
                const querySnapshot = await getDocs(collection(db, "users"));
                usersTableBody.innerHTML = '';
                
                querySnapshot.forEach((doc) => {
                    const user = doc.data();
                    const row = document.createElement('tr');
                    
                    row.innerHTML = `
                        <td>${user.name || 'N/A'}</td>
                        <td>${user.email || 'N/A'}</td>
                        <td>RS ${user.balance?.toFixed(2) || '0.00'}</td>
                        <td>VIP ${user.vip || 0}</td>
                        <td>
                            <button class="action-btn" data-userid="${doc.id}" data-action="edit">Edit</button>
                        </td>
                    `;
                    
                    usersTableBody.appendChild(row);
                });
                
                // Add event listeners to edit buttons
                setTimeout(() => {
                    document.querySelectorAll('[data-action="edit"]').forEach(btn => {
                        btn.addEventListener('click', () => {
                            const userId = btn.getAttribute('data-userid');
                            editUser(userId);
                        });
                    });
                }, 100);
                
            } catch (error) {
                showNotification(error.message, 'error');
                document.getElementById('users-table-body').innerHTML = '<tr><td colspan="5" class="text-center">Error loading users</td></tr>';
            }
        }

        // Edit User (for admin)
        async function editUser(userId) {
            try {
                const userDoc = await getDoc(doc(db, "users", userId));
                if (userDoc.exists()) {
                    const user = userDoc.data();
                    
                    // Create a modal for editing user
                    const modalContent = `
                        <div class="modal-header">
                            <h3 class="modal-title">Edit User: ${user.name}</h3>
                            <button class="close-modal" data-modal="edit-user-modal">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label for="edit-user-balance">Balance</label>
                                <input type="number" id="edit-user-balance" value="${user.balance || 0}" step="0.01">
                            </div>
                            <div class="form-group">
                                <label for="edit-user-vip">VIP Level</label>
                                <input type="number" id="edit-user-vip" value="${user.vip || 0}" min="0" max="10">
                            </div>
                            <button class="btn btn-primary" id="save-user-changes" data-userid="${userId}">Save Changes</button>
                        </div>
                    `;
                    
                    // Create modal if it doesn't exist
                    let modal = document.getElementById('edit-user-modal');
                    if (!modal) {
                        modal = document.createElement('div');
                        modal.id = 'edit-user-modal';
                        modal.className = 'modal';
                        document.body.appendChild(modal);
                    }
                    
                    modal.innerHTML = `<div class="modal-content">${modalContent}</div>`;
                    modal.style.display = 'block';
                    
                    // Add event listener to save button
                    setTimeout(() => {
                        document.getElementById('save-user-changes').addEventListener('click', async () => {
                            const newBalance = parseFloat(document.getElementById('edit-user-balance').value);
                            const newVip = parseInt(document.getElementById('edit-user-vip').value);
                            
                            try {
                                await updateDoc(doc(db, "users", userId), {
                                    balance: newBalance,
                                    vip: newVip
                                });
                                
                                showNotification('User updated successfully!');
                                modal.style.display = 'none';
                                loadAdminUsers(); // Refresh the users list
                            } catch (error) {
                                showNotification(error.message, 'error');
                            }
                        });
                        
                        // Add event listener to close button
                        document.querySelector('[data-modal="edit-user-modal"]').addEventListener('click', () => {
                            modal.style.display = 'none';
                        });
                    }, 100);
                }
            } catch (error) {
                showNotification(error.message, 'error');
            }
        }

        // Load Admin Deposits
        async function loadAdminDeposits() {
            try {
                const depositsTableBody = document.getElementById('deposits-table-body');
                depositsTableBody.innerHTML = '<tr><td colspan="6" class="text-center">Loading deposits...</td></tr>';
                
                const q = query(collection(db, "deposits"), orderBy("createdAt", "desc"));
                const querySnapshot = await getDocs(q);
                
                depositsTableBody.innerHTML = '';
                
                if (querySnapshot.empty) {
                    depositsTableBody.innerHTML = '<tr><td colspan="6" class="text-center">No deposit requests found</td></tr>';
                    return;
                }
                
                querySnapshot.forEach((doc) => {
                    const deposit = doc.data();
                    const row = document.createElement('tr');
                    
                    row.innerHTML = `
                        <td>${deposit.userName || 'Unknown'}</td>
                        <td>RS ${deposit.amount?.toFixed(2) || '0.00'}</td>
                        <td>${deposit.method || 'N/A'}</td>
                        <td>${deposit.transactionId || 'N/A'}</td>
                        <td class="status-${deposit.status || 'pending'}">${deposit.status || 'pending'}</td>
                        <td>
                            ${deposit.status === 'pending' ? `
                                <button class="action-btn btn-approve" data-depositid="${doc.id}" data-action="approve-deposit">Approve</button>
                                <button class="action-btn btn-reject" data-depositid="${doc.id}" data-action="reject-deposit">Reject</button>
                            ` : 'Processed'}
                        </td>
                    `;
                    
                    depositsTableBody.appendChild(row);
                });
                
                // Add event listeners to action buttons
                setTimeout(() => {
                    document.querySelectorAll('[data-action="approve-deposit"]').forEach(btn => {
                        btn.addEventListener('click', () => {
                            const depositId = btn.getAttribute('data-depositid');
                            processDeposit(depositId, 'approved');
                        });
                    });
                    
                    document.querySelectorAll('[data-action="reject-deposit"]').forEach(btn => {
                        btn.addEventListener('click', () => {
                            const depositId = btn.getAttribute('data-depositid');
                            processDeposit(depositId, 'rejected');
                        });
                    });
                }, 100);
                
            } catch (error) {
                showNotification(error.message, 'error');
                document.getElementById('deposits-table-body').innerHTML = '<tr><td colspan="6" class="text-center">Error loading deposits</td></tr>';
            }
        }

        // Process Deposit (Approve/Reject)
        async function processDeposit(depositId, status) {
            try {
                // Get the deposit data
                const depositDoc = await getDoc(doc(db, "deposits", depositId));
                if (!depositDoc.exists()) {
                    showNotification('Deposit not found', 'error');
                    return;
                }
                
                const deposit = depositDoc.data();
                
                // Update deposit status
                await updateDoc(doc(db, "deposits", depositId), {
                    status: status,
                    processedAt: serverTimestamp()
                });
                
                // If approved, add to user's balance
                if (status === 'approved') {
                    const userDoc = await getDoc(doc(db, "users", deposit.userId));
                    if (userDoc.exists()) {
                        const userData = userDoc.data();
                        await updateDoc(doc(db, "users", deposit.userId), {
                            balance: (userData.balance || 0) + deposit.amount
                        });
                    }
                }
                
                showNotification(`Deposit ${status} successfully!`);
                loadAdminDeposits(); // Refresh the deposits list
                
            } catch (error) {
                showNotification(error.message, 'error');
            }
        }

        // Load Admin Withdrawals
        async function loadAdminWithdrawals() {
            try {
                const withdrawalsTableBody = document.getElementById('withdrawals-table-body');
                withdrawalsTableBody.innerHTML = '<tr><td colspan="6" class="text-center">Loading withdrawals...</td></tr>';
                
                const q = query(collection(db, "withdrawals"), orderBy("createdAt", "desc"));
                const querySnapshot = await getDocs(q);
                
                withdrawalsTableBody.innerHTML = '';
                
                if (querySnapshot.empty) {
                    withdrawalsTableBody.innerHTML = '<tr><td colspan="6" class="text-center">No withdrawal requests found</td></tr>';
                    return;
                }
                
                querySnapshot.forEach((doc) => {
                    const withdrawal = doc.data();
                    const row = document.createElement('tr');
                    
                    row.innerHTML = `
                        <td>${withdrawal.userName || 'Unknown'}</td>
                        <td>RS ${withdrawal.amount?.toFixed(2) || '0.00'}</td>
                        <td>${withdrawal.method || 'N/A'}</td>
                        <td>${withdrawal.accountNumber || 'N/A'}</td>
                        <td class="status-${withdrawal.status || 'pending'}">${withdrawal.status || 'pending'}</td>
                        <td>
                            ${withdrawal.status === 'pending' ? `
                                <button class="action-btn btn-approve" data-withdrawalid="${doc.id}" data-action="approve-withdrawal">Approve</button>
                                <button class="action-btn btn-reject" data-withdrawalid="${doc.id}" data-action="reject-withdrawal">Reject</button>
                            ` : 'Processed'}
                        </td>
                    `;
                    
                    withdrawalsTableBody.appendChild(row);
                });
                
                // Add event listeners to action buttons
                setTimeout(() => {
                    document.querySelectorAll('[data-action="approve-withdrawal"]').forEach(btn => {
                        btn.addEventListener('click', () => {
                            const withdrawalId = btn.getAttribute('data-withdrawalid');
                            processWithdrawal(withdrawalId, 'approved');
                        });
                    });
                    
                    document.querySelectorAll('[data-action="reject-withdrawal"]').forEach(btn => {
                        btn.addEventListener('click', () => {
                            const withdrawalId = btn.getAttribute('data-withdrawalid');
                            processWithdrawal(withdrawalId, 'rejected');
                        });
                    });
                }, 100);
                
            } catch (error) {
                showNotification(error.message, 'error');
                document.getElementById('withdrawals-table-body').innerHTML = '<tr><td colspan="6" class="text-center">Error loading withdrawals</td></tr>';
            }
        }

        // Process Withdrawal (Approve/Reject)
        async function processWithdrawal(withdrawalId, status) {
            try {
                // Get the withdrawal data
                const withdrawalDoc = await getDoc(doc(db, "withdrawals", withdrawalId));
                if (!withdrawalDoc.exists()) {
                    showNotification('Withdrawal not found', 'error');
                    return;
                }
                
                const withdrawal = withdrawalDoc.data();
                
                // Update withdrawal status
                await updateDoc(doc(db, "withdrawals", withdrawalId), {
                    status: status,
                    processedAt: serverTimestamp()
                });
                
                // If rejected, return funds to user's balance
                if (status === 'rejected') {
                    const userDoc = await getDoc(doc(db, "users", withdrawal.userId));
                    if (userDoc.exists()) {
                        const userData = userDoc.data();
                        await updateDoc(doc(db, "users", withdrawal.userId), {
                            balance: (userData.balance || 0) + withdrawal.amount
                        });
                    }
                }
                
                showNotification(`Withdrawal ${status} successfully!`);
                loadAdminWithdrawals(); // Refresh the withdrawals list
                
            } catch (error) {
                showNotification(error.message, 'error');
            }
        }

        // Load Admin Customer Service Requests
        async function loadAdminCustomerService() {
            try {
                const customerServiceTableBody = document.getElementById('customer-service-table-body');
                customerServiceTableBody.innerHTML = '<tr><td colspan="5" class="text-center">Loading requests...</td></tr>';
                
                const q = query(collection(db, "customer_service"), orderBy("createdAt", "desc"));
                const querySnapshot = await getDocs(q);
                
                customerServiceTableBody.innerHTML = '';
                
                if (querySnapshot.empty) {
                    customerServiceTableBody.innerHTML = '<tr><td colspan="5" class="text-center">No customer service requests found</td></tr>';
                    return;
                }
                
                querySnapshot.forEach((doc) => {
                    const request = doc.data();
                    const row = document.createElement('tr');
                    
                    // Format date
                    const date = request.createdAt ? new Date(request.createdAt.seconds * 1000).toLocaleDateString() : 'N/A';
                    
                    row.innerHTML = `
                        <td>${request.userName || 'Unknown'}</td>
                        <td>${request.subject || 'No Subject'}</td>
                        <td>${request.message ? (request.message.length > 50 ? request.message.substring(0, 50) + '...' : request.message) : 'No Message'}</td>
                        <td>${date}</td>
                        <td class="status-${request.status || 'new'}">${request.status || 'new'}</td>
                    `;
                    
                    customerServiceTableBody.appendChild(row);
                });
                
            } catch (error) {
                showNotification(error.message, 'error');
                document.getElementById('customer-service-table-body').innerHTML = '<tr><td colspan="5" class="text-center">Error loading requests</td></tr>';
            }
        }

        // Show Admin Panel
        function showAdminPanel() {
            authContainer.style.display = 'none';
            dashboard.style.display = 'none';
            adminPanel.style.display = 'block';
        }

        // Show Notification
        function showNotification(message, type = 'success') {
            notification.textContent = message;
            notification.classList.remove('error');
            
            if (type === 'error') {
                notification.classList.add('error');
            }
            
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        // Generate Referral Code
        function generateReferralCode() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let code = '';
            for (let i = 0; i < 8; i++) {
                code += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return code;
        }

        // Demo Functions for Actions
        function showWatchEarn() {
            showNotification('Watch & Earn functionality would open here');
        }

        function showReferEarn() {
            showNotification('Refer & Earn functionality would open here');
        }

        function showGames() {
            showNotification('Games functionality would open here');
        }

        function showAnnouncements() {
            showNotification('Announcements functionality would open here');
        }
    </script>
</body>
</html>
