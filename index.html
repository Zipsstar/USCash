<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>USCash - Premium Gaming Experience</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #0a2463;
            --secondary: #3e92cc;
            --accent: #2dc7ff;
            --success: #00cc66;
            --danger: #ff4d4d;
            --warning: #ffcc00;
            --dark: #0d1b2a;
            --light: #f8f9fa;
            --gray: #6c757d;
            --premium-gold: #ffd700;
            --vip-purple: #9370db;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            background: linear-gradient(135deg, #0d1b2a 0%, #1b263b 100%);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Auth Pages */
        .auth-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect fill="%230a2463" width="50" height="50"/><rect fill="%231b263b" x="50" width="50" height="50"/><rect fill="%231b263b" y="50" width="50" height="50"/><rect fill="%230a2463" x="50" y="50" width="50" height="50"/></svg>') repeat;
            background-size: 100px;
        }
        
        .auth-box {
            background: rgba(13, 27, 42, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            width: 100%;
            max-width: 450px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid var(--secondary);
        }
        
        .auth-header {
            text-align: center;
            margin-bottom: 25px;
        }
        
        .auth-header h1 {
            font-family: 'Orbitron', sans-serif;
            color: var(--accent);
            font-size: 2.5rem;
            margin-bottom: 5px;
            text-shadow: 0 0 10px rgba(45, 199, 255, 0.5);
        }
        
        .auth-header p {
            color: var(--light);
            font-size: 1rem;
        }
        
        .auth-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--secondary);
        }
        
        .auth-tab {
            padding: 12px 20px;
            cursor: pointer;
            font-weight: 600;
            color: var(--gray);
            transition: all 0.3s;
            text-align: center;
            flex: 1;
        }
        
        .auth-tab.active {
            color: var(--accent);
            border-bottom: 3px solid var(--accent);
        }
        
        .auth-form {
            display: none;
        }
        
        .auth-form.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--light);
        }
        
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid rgba(62, 146, 204, 0.3);
            border-radius: 8px;
            background: rgba(13, 27, 42, 0.7);
            color: var(--light);
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(45, 199, 255, 0.3);
        }
        
        .btn {
            display: inline-block;
            padding: 12px 25px;
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .btn:hover {
            background: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--accent) 100%);
        }
        
        .btn-block {
            width: 100%;
        }
        
        .forgot-password {
            text-align: right;
            margin-top: 10px;
        }
        
        .forgot-password a {
            color: var(--accent);
            text-decoration: none;
            font-size: 0.9rem;
        }
        
        /* Dashboard */
        .dashboard {
            display: none;
            min-height: 100vh;
        }
        
        .header {
            background: rgba(13, 27, 42, 0.8);
            backdrop-filter: blur(10px);
            padding: 15px 0;
            border-bottom: 1px solid rgba(62, 146, 204, 0.3);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
        }
        
        .logo h1 {
            font-family: 'Orbitron', sans-serif;
            color: var(--accent);
            font-size: 2rem;
            margin-left: 10px;
            text-shadow: 0 0 10px rgba(45, 199, 255, 0.5);
        }
        
        .logo-icon {
            font-size: 2rem;
            color: var(--accent);
        }
        
        .user-info {
            display: flex;
            align-items: center;
        }
        
        .balance-box {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            padding: 10px 20px;
            border-radius: 10px;
            margin-right: 20px;
            display: flex;
            align-items: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .balance-amount {
            font-weight: 700;
            font-size: 1.2rem;
            margin-right: 10px;
        }
        
        .refresh-balance {
            background: none;
            border: none;
            color: var(--light);
            cursor: pointer;
            font-size: 1rem;
        }
        
        .user-profile {
            display: flex;
            align-items: center;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: 700;
        }
        
        .vip-badge {
            background: linear-gradient(135deg, var(--warning) 0%, var(--premium-gold) 100%);
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            margin-left: 10px;
        }
        
        .marquee {
            background: linear-gradient(90deg, rgba(45, 199, 255, 0.1) 0%, rgba(45, 199, 255, 0.3) 50%, rgba(45, 199, 255, 0.1) 100%);
            padding: 10px 0;
            margin: 15px 0;
            overflow: hidden;
            white-space: nowrap;
            border-radius: 5px;
        }
        
        .marquee-content {
            display: inline-block;
            padding-left: 100%;
            animation: marquee 20s linear infinite;
            color: var(--accent);
            font-weight: 500;
        }
        
        @keyframes marquee {
            0% { transform: translate(0, 0); }
            100% { transform: translate(-100%, 0); }
        }
        
        .welcome-banner {
            background: linear-gradient(135deg, rgba(13, 27, 42, 0.7) 0%, rgba(27, 38, 59, 0.7) 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
            border: 1px solid rgba(62, 146, 204, 0.3);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .welcome-banner h2 {
            font-family: 'Orbitron', sans-serif;
            color: var(--accent);
            margin-bottom: 15px;
            font-size: 2rem;
        }
        
        .welcome-banner p {
            color: var(--light);
            font-size: 1.1rem;
            max-width: 700px;
            margin: 0 auto;
        }
        
        .dashboard-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .action-card {
            background: rgba(13, 27, 42, 0.7);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s;
            border: 1px solid rgba(62, 146, 204, 0.3);
            cursor: pointer;
        }
        
        .action-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            border-color: var(--accent);
        }
        
        .action-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--accent);
        }
        
        .action-card h3 {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: var(--light);
        }
        
        .action-card p {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            overflow-y: auto;
        }
        
        .modal-content {
            background: rgba(13, 27, 42, 0.95);
            margin: 50px auto;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.7);
            border: 2px solid var(--accent);
            overflow: hidden;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: rgba(10, 36, 99, 0.8);
            border-bottom: 1px solid var(--secondary);
        }
        
        .modal-title {
            font-family: 'Orbitron', sans-serif;
            color: var(--accent);
            font-size: 1.5rem;
        }
        
        .close-modal {
            background: none;
            border: none;
            color: var(--light);
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .modal-body {
            padding: 20px;
        }
        
        /* Admin Panel */
        .admin-panel {
            display: none;
            min-height: 100vh;
        }
        
        .admin-header {
            background: rgba(13, 27, 42, 0.8);
            backdrop-filter: blur(10px);
            padding: 15px 0;
            border-bottom: 1px solid rgba(62, 146, 204, 0.3);
        }
        
        .admin-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .admin-card {
            background: rgba(13, 27, 42, 0.7);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s;
            border: 1px solid rgba(62, 146, 204, 0.3);
            cursor: pointer;
        }
        
        .admin-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            border-color: var(--accent);
        }
        
        .admin-icon {
            font-size: 2rem;
            margin-bottom: 15px;
            color: var(--accent);
        }
        
        .admin-card h3 {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: var(--light);
        }
        
        /* Admin Tables */
        .admin-table-container {
            background: rgba(13, 27, 42, 极速赛车开奖结果历史记录);
            border-radius: 15px;
            padding: 20px;
            margin: 30px 0;
            border: 1px solid rgba(62, 146, 204, 0.3);
            overflow-x: auto;
        }
        
        .admin-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .admin-table th, .极速赛车开奖结果历史记录 td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid rgba(62, 146, 204, 0.3);
        }
        
        .admin-table th {
            background: rgba(10, 36, 99, 0.5);
            color: var(--accent);
            font-weight: 600;
        }
        
        .admin-table tr:hover {
            background: rgba(10, 36, 99, 0.2);
        }
        
        .status-pending {
            color: var(--warning);
            font-weight: 600;
        }
        
        .status-approved {
            color: var(--success);
            font-weight: 极速赛车开奖结果历史记录;
        }
        
        .status-rejected {
            color: var(--danger);
            font-weight: 600;
        }
        
        .action-btn {
            padding: 6px 12px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            margin-right: 5极速赛车开奖结果历史记录;
        }
        
        .btn-approve {
            background: var(--success);
            color: white;
        }
        
        .btn-reject {
            background: var(--danger);
            color: white;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .dashboard-actions, .admin-actions {
                grid-template-columns: 1fr;
            }
            
            .user-info {
                flex-direction: column;
                align-items: flex-end;
            }
            
            .balance-box {
                margin-right: 0;
                margin-bottom: 10px;
            }
            
            .game-modal, .modal-content {
                width: 95%;
                height: 85%;
            }
            
            .admin-table th, .admin-table td {
                padding: 8px 10px;
            }
        }
        
        /* Notifications */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background: var(--success);
            color: white;
            border-radius: 8px;
            box-shadow: 0 5极速赛车开奖结果历史记录 15px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            display: none;
            max-width: 350px;
        }
        
        .notification.error {
            background: var(--danger);
        }
        
        /* Loading Spinner */
        .spinner {
            width: 40px;
            height: 40px;
            margin: 20px auto;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid var(--accent);
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Side Menu */
        .side-menu {
            position: fixed;
            top: 0;
            right: -300px;
            width: 300px;
            height: 100%;
            background: rgba(13, 27, 42, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            transition: right 0.3s;
            padding: 20px;
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.3);
            border-left极速赛车开奖结果历史记录 1px solid var(--secondary);
        }
        
        .side-menu.open {
            right: 0;
        }
        
        .menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--secondary);
极速赛车开奖结果历史记录
        .menu-title {
            font-family: 'Orbitron', sans-serif;
            color: var(--accent);
        }
        
        .close-menu {
            background: none;
            border: none;
            color: var(--light);
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .menu-item {
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            background: rgba(10, 36, 99, 0.5);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .menu-item:hover {
            background: rgba(10, 36, 99, 0.8);
            transform: translateX(-5px);
        }
        
        .menu-item i {
            margin-right: 10px;
            color: var(--accent);
        }
        
        .menu-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(10, 36, 99, 0.8);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--light);
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 900;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        /* Game Styles */
        .game-container {
            display: none;
            min-height: 100vh;
        }
        
        .game-header {
            background: rgba(13, 27, 42, 0.8);
            backdrop-filter: blur(10px);
            padding: 15px 0;
            border-bottom: 1px solid rgba(62, 146, 204, 0.3);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .game-content {
            padding: 20px;
            text-align: center;
        }
        
        .game-title {
            font-family: 'Orbitron', sans-serif;
            color: var(--accent);
            font-size: 2.5rem;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(45, 199, 255, 0.5);
        }
        
        .game-description {
            color: var(--light);
            font-size: 1.1rem;
            margin-bottom: 30px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .betting-options {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 30px;
        }
        
        .bet-option {
            padding: 10px 20px;
            background: rgba(10, 36, 99, 0.7);
            border: 1px solid var(--secondary);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .bet-option:hover, .bet-option.selected {
            background: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .game-area {
            background: rgba(13, 27, 42, 0.7);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            border: 1px solid rgba(62, 146, 204, 0.3);
        }
        
        .game-controls {
            margin-top: 30px;
        }
        
        .scratch-card-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            max-width: 400px;
            margin: 0 auto;
        }
        
        .scratch-card {
            width: 100%;
            height: 100px;
            background: var(--primary);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 2rem;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .scratch-card.flipped {
            transform: rotateY(180deg);
        }
        
        .scratch-card-front, .scratch-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            backface-visibility: hidden;
            transition: transform 0.6s;
        }
        
        .scratch-card-back {
            transform: rotateY(180deg);
        }
        
        .countdown-timer {
            font-size: 2rem;
            font-family: 'Orbitron', sans-serif;
            color: var(--accent);
            margin: 20px 0;
        }
        
        /* Terms and Conditions */
        .terms-container {
            background: rgba(13, 27, 42, 0.9);
            border-radius: 15px;
            padding: 30px;
            margin: 30px auto;
            max-width: 800px;
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid var(--secondary);
        }
        
        .terms-title {
            font-family: 'Orbitron', sans-serif;
            color: var(--accent);
            margin-bottom: 20px;
            text-align: center;
        }
        
        .terms-content {
            color: var(--light);
            line-height: 1.6;
        }
        
        .terms-checkbox {
            display: flex;
            align-items: center;
            margin: 20px 0;
        }
        
        .terms-checkbox input {
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <!-- Terms and Conditions Modal -->
    <div class="modal" id="terms-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Terms and Conditions</h3>
                <button class="close-modal" data-modal="terms-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="terms-container">
                    <h3 class="terms-title">USCash Platform Terms</h3>
                    <div class="terms-content">
                        <p>By using USCash, you agree to the following terms and conditions:</p>
                        <ol>
                            <li>You must be at least 18 years old to use this platform.</li>
                            <li>All games are based on skill and chance. Results are random and fair.</li>
                            <li>Deposits and withdrawals are subject to verification and approval.</li>
                            <li>Minimum deposit amount is RS 150.</li>
                            <li>Minimum withdrawal amount is RS 300.</li>
                            <li>If an account remains inactive for more than 15 days, the platform reserves the right not to return deposited funds.</li>
                            <li>Users are responsible for maintaining the security of their accounts.</li>
                            <li>The platform reserves the right to modify these terms at any time.</li>
                            <li>Any attempt to manipulate games or exploit the system will result in immediate account termination.</li>
                            <li>Customer support is available to assist with any issues or concerns.</li>
                        </ol>
                        <p>Since terms & conditions or gambling promotions are not added, users are informed that the platform is not responsible for abandoned accounts. If a user leaves their account inactive for more than 15 days, the platform reserves the right not to return the deposited money. The user must accept these rules to continue; otherwise, access is denied.</p>
                    </div>
                </div>
                <div class="terms-checkbox">
                    <input type="checkbox" id="accept-terms">
                    <label for="accept-terms">I have read and accept the terms and conditions</label>
                </div>
                <button class="btn btn-primary btn-block" id="accept-terms-btn" disabled>Accept and Continue</button>
            </div>
        </div>
    </div>

    <!-- Authentication Section -->
    <div class="auth-container" id="auth-container">
        <div class="auth-box">
            <div class="auth-header">
                <h1><i class="fas fa-coins"></i> USCash</h1>
                <p>Premium Gaming Experience</p>
            </div>
            
            <div class="auth-tabs">
                <div class="auth极速赛车开奖结果历史记录 active" data-tab="login">Login</div>
                <div class="auth-tab" data-tab="signup">Sign Up</div>
            </div>
            
            <div class="auth-form active" id极速赛车开奖结果历史记录"login-form">
                <div class="form-group">
                    <label for="login-email">Email</label>
                    <input type="email" id="login-email" placeholder="Enter your email">
                </div>
                
                <div class="form-group">
                    <label for="login-password">Password</label>
                    <input type="password" id="login-password" placeholder="Enter your password">
                </div>
                
                <button class="btn btn-primary btn-block" id="login-btn">Login</button>
                
                <div class="forgot-password">
                    <a href="#" id="forgot-password-link">Forgot Password?</a>
                </div>
            </div>
            
            <div class="auth-form" id="signup-form">
                <div class="form-group">
                    <label for="signup-name">Full Name</label>
                    <input type="text" id="signup-name" placeholder="Enter your full name">
                </div>
                
                <div class="form-group">
                    <label for="signup-email">Email</label>
                    <input type="email" id="signup-email" placeholder="Enter your email">
                </div>
                
                <div class="form-group">
                    <label for="signup-phone">Phone Number</label>
                    <input type="tel" id="signup-phone" placeholder="Enter your phone number">
                </div>
                
                <div class="form-group">
                    <label for="signup-password">Password</label>
                    <input type="password" id="signup-password" placeholder="Create a password">
                </div>
                
                <极速赛车开奖结果历史记录 class="form-group">
                    <label for="signup-confirm-password">Confirm Password</label>
                    <input type="password" id="signup-confirm-password" placeholder="Confirm your password">
                </div>
                
                <div class="form-group">
                    <label for="signup-referral">Referral Code (Optional)</label>
                    <input type="text" id="signup-referral" placeholder="Enter referral code if any">
                </div>
                
                <button class="btn btn-primary btn-block" id="signup-btn">Create Account</button>
            </div>
            
            <div class="auth-form" id="forgot-password-form">
                <div class="form-group">
                    <label for="forgot-email">Email</label>
                    <input type="email" id="forgot-email" placeholder="Enter your email">
                </div>
                
                <button class="btn btn-primary btn-block" id="reset-password-btn">Reset Password</button>
                
                <div class="forgot-password">
                    <a href="#" id="back-to-login">Back to Login</a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Dashboard Section -->
    <div class="dashboard" id="dashboard">
        <header class="header">
            <div class="container header-content">
                <div class="logo">
                    <i class="fas fa-coins logo-icon"></i>
                    <h1>USCash</h1>
                </div>
                
                <div class="user-info">
                    <div class="balance-box">
                        <span class="balance-amount">RS 0.00</span>
                        <button class="refresh-balance"><i class="fas fa-sync-alt"></i></button>
                    </div>
                    
                    <div class="user-profile">
                        <div class="user-avatar">U</div>
                        <div class="user-details">
                            <div class="username">User Name</div>
                            <div class="vip-badge">VIP 0</div>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        
        <div class="container">
            <div class="marquee">
                <div class="marquee-content" id="marquee-text">
                    For deposits contact VIP 2 users, We are working on deposit methods soon we will update you guys thanks for your patience
                </div>
            </div>
            
            <div class="welcome-banner">
                <h2>Welcome, <span id="user-greeting">User</span>!</h2>
                <p>Experience the world-class gaming platform with exciting rewards and premium games.</p>
            </div>
            
            <div class="dashboard-actions">
                <div class="action-card" data-action="deposit">
                    <i class="fas fa-money-bill-wave action-icon"></i>
                    <h3>Deposit</h3>
                    <p>Add funds to your account (Minimum RS 150)</p>
                </div>
                
                <div class="action-card" data-action="withdraw">
                    <i class="fas fa-wallet action-icon"></极速赛车开奖结果历史记录>
                    <h3>Withdraw</h3>
                    <p>Withdraw your earnings (Minimum RS 300)</极速赛车开奖结果历史记录>
                </div>
                
                <div class="action-card" data-action="watch-earn">
                    <i class="fas fa-video action-icon"></i>
                    <h3>Watch & Earn</h3>
                    <p>Watch ads and earn money (Unlock for RS 150)</p>
                </div>
                
                <div class="action-card" data-action="refer-earn">
                    <i class="fas fa-users action-icon"></i>
                    <h3>Refer & Earn</h3>
                    <p>Refer friends and earn rewards</p>
                </div>
                
                <div class="action-card" data-action="games">
                    <i class="fas fa-gamepad action-icon"></i>
                    <h3>Games</h3>
                    <p>Play premium games and win big</p>
                </div>
                
                <div class="action-card" data-action="announcements">
                    <i class="fas fa-bullhorn action-icon"></i>
                    <h3>Announcements</h3>
                    <p>Check latest updates and announcements</p>
                </div>
            </div>
        </div>
        
        <button class="menu-toggle" id="menu-toggle">
            <i class="fas fa-bars"></i>
        </button>
        
        <div class="side-menu" id="side-menu">
            <div class="menu-header">
                <h3 class极速赛车开奖结果历史记录"menu-title">Menu</h3>
                <button class="close-menu" id="close-menu">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="menu-item" id="customer-service-btn">
                <i class="fas fa-headset"></i> Customer Service
            </div>
            
            <div class="menu-item" id="game-history-btn">
                <i class="fas fa-history"></i> Game History
            </div>
            
            <div class="menu-item" id="updates-btn">
                <i class="fas fa-bell"></i> Upcoming Updates
            </div>
            
            <div class="menu-item">
                <i class="fab fa-whatsapp"></i> WhatsApp Channel
            </div>
            
            <div class="menu-item" id="admin-login-btn">
                <i class="fas fa-lock"></i> Admin Login
            </div>
            
            <div class="menu-item" id="logout-btn">
                <i class="fas fa-sign-out-alt"></i> Logout
            </div>
        </div>
    </div>
    
    <!-- Admin Panel Section -->
    <div class="admin-panel" id="admin-panel">
        <header class="admin-header">
            <div class="container header-content">
                <div class="logo">
                    <i class="fas fa-lock logo-icon"></i>
                    <h1>USCash Admin</h1>
                </div>
                
                <div class="user-info">
                    <div class="user-profile">
                        <div class="user-avatar">A</div>
                        <div class="user-details">
                            <div class="username">Admin</div>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        
        <div class="container">
            <div class="welcome-banner">
                <h2>Admin Dashboard</h2>
                <p>Manage users, transactions, and platform settings.</p>
            </div>
            
            <div class="admin-actions">
                <div class="admin-card" data-action="manage-users">
                    <i class="fas fa-users admin-icon"></i>
                    <h3>Manage Users</h3>
                </div>
                
                <div class="admin-card" data-action="deposit-requests">
                    <i class="fas fa-money-bill-wave admin-icon"></i>
                    <h3>Deposit Requests</h3>
                </div>
                
                <div class="admin-card" data-action="withdrawal-requests">
                    <i class="fas fa-wallet admin-icon"></i>
                    <h3>Withdrawal Requests</h3>
                </div>
                
                <div class="admin-card" data-action="customer-service">
                    <i class="fas fa-headset admin-icon"></i>
                    <h3>Customer Service</h3>
                </div>
                
                <div class="admin-card" data-action="send-announcement">
                    <i class="fas fa-bullhorn admin-icon"></i>
                    <h3>Send Announcement</h3>
                </div>
                
                <div class="admin-card" data-action="marquee-text">
                    <i class="fas fa-scroll admin-icon"></i>
                    <h3>Update Marquee Text</h3>
                </div>
                
                <div class="admin-card" id="back-to-user">
                    <i class="fas fa-sign-out-alt admin-icon"></i>
                    <h3>Back to User View</h3>
                </极速赛车开奖结果历史记录>
            </div>
            
            <!-- Admin Content Areas -->
            <div id="admin-users-content" class="admin-table-container" style="display: none;">
                <h3>Manage Users</h3>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Balance</th>
                            <th>VIP Level</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="users-table-body">
                        <!-- Users will be populated here -->
                    </tbody>
                </table>
            </div>
            
            <div id="admin-deposits-content" class="admin-table-container" style="display: none;">
                <h3>Deposit Requests</h3>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>User</th>
                            <th>Amount</th>
                            <th>Method</th>
                            <th>Transaction ID</th>
                            <th>Status</th>
                            <th>Actions</极速赛车开奖结果历史记录>
                        </tr>
                    </thead>
                    <tbody id="deposits-table-body">
                        <!-- Deposits will be populated here -->
                    </tbody>
                </table>
            </div>
            
            <div id="admin-withdrawals-content" class="admin-table-container" style="display: none;">
                <h3>Withdrawal Requests</h3>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>User</th>
                            <th>Amount</th>
                            <th>Method</th>
                            <th>Account</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="withdrawals-table-body">
                        <!-- Withdrawals will be populated here -->
                    </tbody>
                </table>
            </div>
            
            <div id="admin-customer-service-content" class="admin-table-container" style="display: none;">
                <h3>Customer Service Requests</h3>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>User</th>
                            <th>Subject</th>
                            <th>Message</th>
                            <th>Date</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="customer-service-table-body">
                        <!-- Customer service requests will be populated here -->
                    </tbody>
                </table>
            </div>
            
            <div id="admin-announcement-content" class="admin-table-container极速赛车开奖结果历史记录 style="display: none;">
                <h3>Send Announcement</h3>
                <div class="form-group">
                    <label for="announcement-title">Title</label>
                    <input type="text" id="announcement-title" placeholder="Enter announcement title">
                </div>
                <div class="form-group">
                    <label for="announcement-content">Content</label>
                    <textarea id="announcement-content" rows="5" placeholder="Enter announcement content"></textarea>
                </div>
                <button class="btn btn-primary" id="send-announcement-btn">Send Announcement</button>
            </div>
            
            <div id="admin-marquee-content" class="admin-table-container" style="display: none;">
                <h3>Update Marquee Text</h3>
                <div class="form-group">
                    <label for="marquee-content">Marquee Text</label>
                    <input type="text" id="marquee-content-input" placeholder="Enter marquee text">
                </div>
                <button class="btn btn-primary" id="update-marquee-btn">Update Marquee</button>
            </div>
        </div>
    </div>
    
    <!-- Deposit Modal -->
    <div class="modal" id="deposit-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Deposit Funds</h3>
                <button class="close-modal" data-modal="deposit-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="deposit-account-name">Account Name</label>
                    <input type="text" id="deposit-account-name" placeholder="Enter account name">
                </div>
                
                <div class="form-group">
                    <label for="deposit-method">Payment Method</label>
                    <select id="deposit-method">
                        <option value="jazzcash">JazzCash</option>
                        <option value="easypaisa">EasyPaisa</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="deposit-amount">Amount (Minimum RS 150)</label>
                    <input type="number" id="deposit-amount" min="150" placeholder="Enter amount">
                </div>
                
                <div class="form-group">
                    <label for="deposit-transaction-id">Transaction ID</label>
                    <input type="text" id="deposit-transaction-id" placeholder="Enter transaction ID">
                </div>
                
                <button class="btn btn-primary btn-block" id="submit-deposit">Submit Deposit Request</button>
            </div>
        </div>
    </div>
    
    <!-- Withdrawal Modal -->
    <div class="modal" id="withdraw-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Withdraw Funds</h3>
                <button class="close-modal" data-modal="withdraw-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="withdraw-account-name">Account Name</label>
                    <input type="text" id="withdraw-account-name" placeholder="Enter account name">
                </div>
                
                <div class="form-group">
                    <label for="极速赛车开奖结果历史记录-account-number">Account Number</label>
                    <input type="text" id="withdraw-account-number" placeholder="Enter account number">
                </极速赛车开奖结果历史记录>
                
                <div class="form-group">
                    <label for="withdraw-method">Payment Method</label>
                    <select id="withdraw-method">
                        <option value="jazzcash">JazzCash</option>
                        <option value="easypaisa">EasyPaisa</option>
                        <option value="nayap极速赛车开奖结果历史记录">Naya Pay</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="withdraw-amount">Amount (Minimum RS 300)</label>
                    <input type="number" id="withdraw-amount" min="300" placeholder="Enter amount">
                </div>
                
                <button class="btn btn-primary btn-block" id="submit-withdrawal">Submit Withdrawal Request</button>
            </div>
        </div>
    </div>
    
    <!-- Customer Service Modal -->
    <div class="modal" id="customer-service-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Customer Service</h3>
                <button class="close-modal" data-modal="customer-service-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="customer-subject">Subject</label>
                    <input type="text" id="customer-subject" placeholder="Enter subject">
                </div>
                
                <div class="form-group">
                    <label for="customer-message">Message</label>
                    <textarea id="customer-message" rows="5" placeholder="Enter your message"></textarea>
                </div>
                
                <button class="btn btn-primary btn-block" id="submit-customer-service">Send Message</button>
            </div>
        </div>
    </div>
    
    <!-- Watch & Earn Modal -->
    <div class="modal" id="watch-earn-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Watch & Earn</h3>
                <button class="close-modal" data-modal="watch-earn-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div id="watch-earn-unlock" style="text-align: center;">
                    <i class="fas fa-lock" style="font-size: 3rem; color: var(--warning); margin-bottom: 20px;"></i>
                    <h3>Unlock Watch & Earn</h3>
                    <p>Pay RS 150 to unlock the Watch & Earn feature for 4 days</p>
                    <button class="btn btn-primary" id="unlock-watch-earn">Unlock for RS 150</button>
                </div>
                
                <div id="watch-earn-content" style="display: none;">
                    <div class="ads-container" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                        <!-- Ads will be populated here -->
                    </div>
                    <div class="watch-earn-timer" style="text-align: center; margin-top: 20px;">
                        <h4>Time Remaining: <span id="watch-earn-time">4 days</span></h4>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Refer & Earn Modal -->
    <div class="modal" id="refer-earn-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Refer & Earn</h3>
                <button class="close-modal" data-modal="refer-earn-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Your Referral Code</label>
                    <div style="display: flex;">
                        <input type="text" id="referral-code" readonly style="flex: 1;">
                        <button class="btn" id="copy-referral" style="margin-left: 10px;">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>
                
                <div class="form-group">
                    <h4>Referral Stats</h4>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 15px;">
                        <div style="background: rgba(10, 36, 99, 0.5); padding: 15px; border-radius: 8px; text-align: center;">
                            <div style="font-size: 2rem; color: var(--accent);" id="referral-count">0</div>
                            <div>Total Referrals</div>
                        </div>
                        <div style="background: rgba(10, 36, 99, 0.5); padding: 15px; border-radius: 8px; text-align: center;">
                            <div style="font-size: 2rem; color: var(--accent);" id="referral-earnings">RS 0.00</div>
                            <div>Total Earnings</div>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <h4>How It Works</h4>
                    <ul style="padding-left: 20px;">
                        <li>Share your referral code with friends</li>
                        <li>When they sign up and make their first deposit, you get 5% of their deposit amount</li>
                        <li>VIP Levels:
                            <ul style="padding-left: 20px;">
                                <li>5 referrals: VIP Level 2</li>
                                <li>10 referrals: VIP Level 3</li>
                                <li>15 referrals: VIP Level 4</li>
                                <li>25 referrals: VIP Level 5 + Special Salary</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Games Selection Modal -->
    <div class="modal" id="games-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Select a Game</h3>
                <button class="close-modal" data-modal="games-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="betting-options">
                    <div class="bet-option" data-bet="20">RS 20</div>
                    <div class="bet-option" data-bet="50">RS 50</div>
                    <div class="bet-option" data-bet="70">RS 70</div>
                    <div class="bet-option" data-bet="100">RS 100</div>
                    <div class="bet-option" data-bet="150">RS 150</div>
                    <div class="bet-option" data-bet="180">RS 180</div>
                    <div class="bet-option" data-bet="200">RS 200</div>
                    <div class="bet-option" data-bet="300">RS 300</div>
                </div>
                
                <div style="text-align: center; margin: 20px 0;">
                    <h4>Selected Bet: <span id="selected-bet">RS 0</span></h4>
                </div>
                
                <div class="games-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                    <div class="game-option" data-game="scratch">
                        <div style="background: rgba(10, 36, 99, 0.7); padding: 20px; border-radius: 10px; text-align: center; cursor: pointer;">
                            <i class="fas fa-clone" style="font-size: 3rem; color: var(--accent);"></i>
                            <h4>Scratch Match</h4>
                        </div>
                    </div>
                    
                    <div class="game-option" data-game="aim">
                        <div style="background: rgba(10, 36, 99, 0.7); padding: 20px; border-radius: 10px; text-align: center; cursor: pointer;">
                            <i class="fas fa-bullseye" style="font-size: 3rem; color: var(--accent);"></i>
                            <h4>Perfect Aim</h4>
                        </div>
                    </div>
                    
                    <div class="game-option" data-game="tower">
                        <div style="background: rgba(10, 36, 99, 0.7); padding: 20px; border-radius: 10px; text-align: center; cursor: pointer;">
                            <i class="fas fa-building" style="font-size: 3rem; color: var(--accent);"></i>
                            <h4>Impossible Tower</h4>
                        </div>
                    </div>
                    
                    <div class="game-option" data-game="fruit">
                        <div style="background: rgba(10, 36, 99, 0.7); padding: 20px; border-radius: 10px; text-align: center; cursor: pointer;">
                            <i class="fas fa-apple-alt" style="font-size: 3rem; color: var(--accent);"></i>
                            <h4>Fruit Shooting</h4>
                        </div>
                    </div>
                    
                    <div class="game-option" data-game="tictactoe">
                        <div style="background: rgba(10, 36, 99, 0.7); padding: 20px; border-radius: 10px; text-align: center; cursor: pointer;">
                            <i class="fas fa-times" style="font-size: 3rem; color: var(--accent);"></i>
                            <h4>Tic-Tac-Toe</h4>
                        </div>
                    </div>
                    
                    <div class="game-option" data-game="findace">
                        <div style="background: rgba(10, 36, 99, 0.7); padding: 20极速赛车开奖结果历史记录; border-radius: 10px; text-align: center; cursor: pointer;">
                            <i class="fas fa-search" style="font-size: 3rem; color: var(--accent);"></i>
                            <h4>Find Ace</h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Scratch Match Game -->
    <div class="game-container" id="scratch-game">
        <header class="game-header">
            <div class="container header-content">
                <div class="logo">
                    <i class="fas fa-clone logo-icon"></i>
                    <h1>Scratch Match</h1>
                </div>
                
                <div class="user-info">
                    <div class="balance-box">
                        <span class="balance-amount">RS 0.00</span>
                    </div>
                </div>
            </div>
        </header>
        
        <div class="container game-content">
            <h2 class="game-title">Scratch Match</h2>
            <p class="game-description">Find 3 matching symbols to win 2x your bet amount!</p>
            
            <div class="countdown-timer" id="scratch-timer">15</div>
            
            <div class="game-area">
                <div class="scratch-card-container" id="scratch-cards">
                    <!-- Cards will be populated here -->
                </div>
            </div>
            
            <div class="game-controls">
                <button class="btn btn-primary" id="start-scratch">Start Game</button>
                <button class="btn" id="exit-scratch">Exit Game</button>
            </div>
        </div>
    </div>
    
    <!-- Notification -->
    <div class="notification" id="notification">
        Operation completed successfully!
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
        import { 
            getAuth, 
            createUserWithEmailAndPassword, 
            signInWithEmailAndPassword, 
            sendPasswordResetEmail,
            onAuthStateChanged,
            signOut
        } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-auth.js";
        import { 
            getFirestore, 
            doc, 
            setDoc, 
            getDoc, 
            updateDoc,
            collection,
            addDoc,
            query,
            where,
            getDocs,
            onSnapshot,
            serverTimestamp,
            orderBy
        } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-firestore.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBM7DY6i11IP极速赛车开奖结果历史记录DAvVA6tsgmz7Epi5bJh0",
            authDomain: "pakcashplay.firebaseapp.com",
            projectId: "pakcashplay",
            storageBucket: "pakcashplay.firebasestorage.app",
            messagingSenderId: "551195851632",
            appId: "1:551195851632:web:4dcf6a8fb36d82e6a6adb5"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // DOM Elements
        const authContainer = document.getElementById('auth-container');
        const dashboard = document.getElementById('dashboard');
        const adminPanel = document.getElementById('admin-panel');
        const authTabs = document.querySelectorAll('.auth-tab');
        const authForms = document.querySelectorAll('.auth-form');
        const loginForm = document.getElementById('login-form');
        const signupForm = document.getElementById('signup-form');
        const forgotPasswordForm = document.getElementById('forgot-password-form');
        const loginBtn = document.getElementById('login-btn');
        const signupBtn = document.getElementById('signup-btn');
        const resetPasswordBtn = document.getElementById('reset-password-btn');
        const forgotPasswordLink = document.getElementById('forgot-password-link');
        const backToLogin = document.getElementById('back-to-login');
        const notification = document.getElementById('notification');
        const balanceAmount = document.querySelector('.balance-amount');
        const refreshBalanceBtn = document.querySelector('.refresh-balance');
        const userGreeting = document.getElementById('user-greeting');
        const usernameDisplay = document.querySelector('.username');
        const userAvatar = document.querySelector('.user-avatar');
        const menuToggle = document.getElementById('menu-toggle');
        const sideMenu = document.getElementById('side-menu');
        const closeMenuBtn = document.getElementById('close-menu');
        const adminLoginBtn = document.getElementById('admin-login-btn');
        const logoutBtn = document.getElementById('logout-btn');
        const backToUserBtn = document.getElementById('back-to-user');
        const depositModal = document.getElementById('deposit-modal');
        const withdrawModal = document.getElementById('withdraw-modal');
        const customerServiceModal = document.getElementById('customer-service-modal');
        const watchEarnModal = document.getElementById('watch-earn-modal');
        const referEarnModal = document.getElementById('refer-earn-modal');
        const gamesModal = document.getElementById('games-modal');
        const closeModalBtns = document.querySelectorAll('.close-modal');
        const submitDepositBtn = document.getElementById('submit-deposit');
        const submitWithdrawalBtn = document.getElementById('submit-withdrawal');
        const submitCustomerServiceBtn = document.getElementById('submit-customer-service');
        const customerServiceBtn = document.getElementById('customer-service-btn');
        const actionCards = document.querySelectorAll('.action-card');
        const adminCards = document.querySelectorAll('.admin-card');
        const marqueeText = document.getElementById('marquee-text');
        const unlockWatchEarnBtn = document.getElementById('unlock-watch-earn');
        const copyReferralBtn = document.getElementById('copy-referral');
        const betOptions = document.querySelectorAll('.bet-option');
        const gameOptions = document.querySelectorAll('.game-option');
        const scratchGame = document.getElementById('scratch-game');
        const scratchCards = document.getElementById('scratch-cards');
        const startScratchBtn = document.getElementById('start-scratch');
        const exitScratchBtn = document.getElementById('exit-scratch');
        const scratchTimer = document.getElementById('scratch-timer');
        const termsModal = document.getElementById('terms-modal');
        const acceptTermsCheckbox = document.getElementById('accept-terms');
        const acceptTermsBtn = document.getElementById('accept-terms-btn');

        // Admin content areas
        const adminUsersContent = document.getElementById('admin-users-content');
        const adminDepositsContent = document.getElementById('admin-deposits-content');
        const adminWithdrawalsContent = document.getElementById('admin-withdrawals-content');
        const adminCustomerServiceContent = document.getElementById('admin-customer-service-content');
        const adminAnnouncementContent = document.getElementById('admin-announcement-content');
        const adminMarqueeContent = document.getElementById('admin-marquee-content');
        const sendAnnouncementBtn = document.getElementById('send-announcement-btn');
        const updateMarqueeBtn = document.getElementById('update-marquee-btn');

        // Game variables
        let currentBet = 0;
        let selectedGame = '';
        let scratchCardValues = [];
        let selectedCards = [];
        let scratchGameActive = false;
        let scratchTimerInterval;

        // Auth Tab Switching
        authTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.getAttribute('data-tab');
                
                // Update active tab
                authTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Show corresponding form
                authForms.forEach(form => form.classList.remove('active'));
                document.getElementById(`${tabId}-form`).classList.add('active');
            });
        });

        // Forgot Password Link
        forgotPasswordLink.addEventListener('click', (e) => {
            e.preventDefault();
            authForms.forEach(form => form.classList.remove('active'));
            forgotPasswordForm.classList.add('active');
        });

        // Back to Login
        backToLogin.addEventListener('click', (e) => {
            e.preventDefault();
            authForms.forEach(form => form.classList.remove('active'));
            loginForm.classList.add('active');
            authTabs.forEach(t => t.classList.remove('active'));
            document.querySelector('[data-tab="login"]').classList.add('active');
        });

        // Accept Terms Checkbox
        acceptTermsCheckbox.addEventListener('change', () => {
            acceptTermsBtn.disabled = !acceptTermsCheckbox.checked;
        });

        // Accept Terms Button
        acceptTermsBtn.addEventListener('click', () => {
            termsModal.style.display = 'none';
            // Continue with signup process
            handleSignup();
        });

        // Sign Up Functionality
        signupBtn.addEventListener('click', () => {
            // Show terms and conditions first
            termsModal.style.display = 'block';
        });

        async function handleSignup() {
            const name = document.getElementById('signup-name').value;
            const email = document.getElementById('signup-email').value;
            const phone = document.getElementById('signup-phone').value;
            const password = document.getElementById极速赛车开奖结果历史记录signup-password').value;
            const confirmPassword = document.getElementById('signup-confirm-password').value;
            const referralCode = document.getElementById('signup-referral').value;

            // Validation
            if (!name || !email || !phone || !password || !confirmPassword) {
                showNotification('Please fill all fields', 'error');
                return;
            }

            if (password !== confirmPassword) {
                showNotification('Passwords do not match', 'error');
                return;
            }

            if (password.length < 6) {
                showNotification('Password must be at least 6 characters', 'error');
                return;
            }

            try {
                // Check if email already exists
                const usersQuery = query(collection(db, "users"), where("email", "==", email));
                const emailSnapshot = await getDocs(usersQuery);
                if (!emailSnapshot.empty) {
                    showNotification('Email already registered', 'error');
                    return;
                }

                // Check if phone already exists
                const phoneQuery = query(collection(db, "users"), where("phone", "==", phone));
                const phoneSnapshot = await getDocs(phoneQuery);
                if (!phoneSnapshot.empty) {
                    showNotification('Phone number already registered', 'error');
                    return;
                }

                // Create user with email and password
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                const user = userCredential.user;

                // If referral code provided, validate it
                let referredBy = null;
                if (referralCode) {
                    const referralQuery = query(collection(db, "users"), where("referralCode", "==", referralCode));
                    const referralSnapshot = await getDocs(referralQuery);
                    if (!referralSnapshot.empty) {
                        referredBy = referralSnapshot.docs[0].id;
                    }
                }

                // Create user document in Firestore
                await setDoc(doc(db, "users", user.uid), {
                    name: name,
                    email: email,
                    phone: phone,
                    balance: 0,
                    vip: 0,
                    referrals: 0,
                    referralEarnings: 0,
                    watchAndEarn: false,
                    watchAndEarnExpiry: null,
                    referralCode: generateReferralCode(),
                    referredBy: referredBy,
                    createdAt: serverTimestamp(),
                    lastActive: serverTimestamp()
                });

                // If referred by someone, update their referral count
                if (referredBy) {
                    const referrerDoc = await getDoc(doc(db, "users", referredBy));
                    if (referrerDoc.exists()) {
                        const referrerData = referrerDoc.data();
                        await updateDoc(doc(db, "users", referredBy), {
                            referrals: (referrerData.referrals || 0) + 1
                        });

                        // Update VIP level based on referrals
                        const newReferralCount = referrerData.referrals + 1;
                        let newVipLevel = 0;
                        if (newReferralCount >= 25) newVipLevel = 5;
                        else if (newReferralCount >= 15) newVipLevel = 4;
                        else if (newReferralCount >= 10) newVipLevel = 3;
                        else if (newReferralCount >= 5) newVipLevel = 2;
                        else newVipLevel = referrerData.vip || 0;

                        if (newVipLevel !== referrerData.vip) {
                            await updateDoc(doc(db, "users", referredBy), {
                                vip: newVipLevel
                            });
                        }
                    }
                }

                showNotification('Account created successfully!');
                
                // Switch to login form
                authForms.forEach(form => form.classList.remove('active'));
                loginForm.classList.add('active');
                authTabs.forEach(t => t.classList.remove('active'));
                document.querySelector('[data-tab="login"]').classList.add('active');
                
            } catch (error) {
                showNotification(error.message, 'error');
            }
        }

        // Login Functionality
        loginBtn.addEventListener('click', async () => {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;

            if (!email || !password) {
                showNotification('Please enter email and password', 'error');
                return;
            }

            try {
                // Show loading
                loginBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Logging in...';
                loginBtn.disabled = true;
                
                const userCredential = await signInWithEmailAndPassword(auth, email, password);
                const user = userCredential.user;
                
                // Update last active timestamp
                await updateDoc(doc(db, "users", user.uid), {
                    lastActive: serverTimestamp()
                });
                
                showNotification('Login successful!');
                
                // Check if admin user
                if (['cptanil1995@gmail.com', 'auk5562@gmail.com', 'kafe2999@gmail.com'].includes(email)) {
                    showAdminPanel();
                    loadAdminData();
                } else {
                    // Load user data and show dashboard
                    loadUserData(user.uid);
                }
                
            } catch (error) {
                showNotification(error.message, 'error');
                loginBtn.innerHTML = 'Login';
                loginBtn.disabled = false;
            }
        });

        // Reset Password Functionality
        resetPasswordBtn.addEventListener('click', async () => {
            const email = document.getElementById('forgot-email').value;

            if (!email) {
                showNotification('Please enter your email', 'error');
                return;
            }

            try {
                await sendPasswordResetEmail(auth, email);
                showNotification('Password reset email sent! Check your inbox.');
            } catch (error) {
                showNotification(error.message, 'error');
            }
        });

        // Menu Toggle
        menuToggle.addEventListener('click', () => {
            sideMenu.classList.add('open');
        });

        closeMenuBtn.addEventListener('click', () => {
            sideMenu.classList.remove('open');
        });

        // Customer Service Button
        customerServiceBtn.addEventListener('click', () => {
            sideMenu.classList.remove('open');
            customerServiceModal.style.display = 'block';
        });

        // Admin Login
        adminLoginBtn.addEventListener('click', () => {
            sideMenu.classList.remove('open');
            showNotification('Please log in with your admin credentials');
            // Switch to login form
            dashboard.style.display = 'none';
            authContainer.style.display = 'flex';
            authForms.forEach(form => form.classList.remove('active'));
            loginForm.classList.add('active');
            authTabs.forEach(t => t.classList.remove('active'));
            document.querySelector('[data-tab="login"]').classList.add('active');
        });

        // Logout
        logoutBtn.addEventListener('click', async () => {
            try {
                await signOut(auth);
                sideMenu.classList.remove('open');
                showNotification('Logged out successfully');
            } catch (error) {
                showNotification(error.message, 'error');
            }
        });

        // Back to User View from Admin
        backToUserBtn.addEventListener('click', () => {
            adminPanel.style.display = 'none';
            dashboard.style.display = 'block';
            // Hide all admin content areas
            document.querySelectorAll('.admin-table-container').forEach(el => {
                el.style.display = 'none';
            });
        });

        // Close Modals
        closeModalBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const modalId = btn.getAttribute('data-modal');
                document.getElementById(modalId).style.display = 'none';
            });
        });

        // Action Cards Click
        actionCards.forEach(card => {
            card.addEventListener('click', () => {
                const action = card.getAttribute('data-action');
                
                switch(action) {
                    case 'deposit':
                        depositModal.style.display = 'block';
                        break;
                    case 'withdraw':
                        withdrawModal.style.display = 'block';
                        break;
                    case 'watch-earn':
                        showWatchEarn();
                        break;
                    case 'refer-earn':
                        showReferEarn();
                        break;
                    case 'games':
                        gamesModal.style.display = 'block';
                        break;
                    case 'announcements':
                        showAnnouncements();
                        break;
                }
            });
        });

        // Admin Cards Click
        adminCards.forEach(card => {
            card.addEventListener('click', () => {
                const action = card.getAttribute('data-action');
                
                // Hide all admin content areas first
                document.querySelectorAll('.admin-table-container').forEach(el => {
                    el.style.display = 'none';
                });
                
                switch(action) {
                    case 'manage-users':
                        adminUsers极速赛车开奖结果历史记录.style.display = 'block';
                        loadAdminUsers();
                        break;
                    case 'deposit-requests':
                        adminDepositsContent.style.display = 'block';
                        loadAdminDeposits();
                        break;
                    case 'withdrawal-requests':
                        adminWithdrawalsContent.style.display = 'block';
                        loadAdminWithdrawals();
                        break;
                    case 'customer-service':
                        adminCustomerServiceContent.style.display = 'block';
                        loadAdminCustomerService();
                        break;
                    case 'send-announcement':
                        adminAnnouncementContent.style.display = 'block';
                        break;
                    case 'marquee-text':
                        adminMarqueeContent.style.display = 'block';
                        break;
                }
            });
        });

        // Submit Deposit
        submitDepositBtn.addEventListener('click', async () => {
            const accountName = document.getElementById('deposit-account-name').value;
            const method = document.getElementById('deposit-method').value;
            const amount = parseInt(document.getElementById('deposit-amount').value);
            const transactionId = document.getElementById('deposit-transaction-id').value;

            if (!accountName || !amount || !transactionId) {
                showNotification('Please fill all fields', 'error');
                return;
            }

            if (amount < 150) {
                showNotification('Minimum deposit amount is RS 150', 'error');
                return;
            }

            try {
                const user = auth.currentUser;
                if (!user) {
                    showNotification('You must be logged in to deposit', 'error');
                    return;
                }

                // Add deposit request to Firestore
                await addDoc(collection(db, "deposits"), {
                    userId: user.uid,
                    userName: user.displayName || 'Unknown',
                    accountName: accountName,
                    method: method,
                    amount: amount,
                    transactionId: transactionId,
                    status: 'pending',
                    createdAt: serverTimestamp()
                });

                showNotification('Deposit request submitted successfully! Please wait for approval.');
                depositModal.style.display = 'none';
                
                // Clear form
                document.getElementById('deposit-account-name').value = '';
                document.getElementById('deposit-amount').value = '';
                document.getElementById('deposit-transaction-id').value = '';
                
            } catch (error) {
                showNotification(error.message, 'error');
            }
        });

        // Submit Withdrawal
        submitWithdrawalBtn.addEventListener('click', async () => {
            const accountName = document.getElementById('withdraw-account-name').value;
            const accountNumber = document.getElementById('withdraw-account-number').value;
            const method = document.getElementById('withdraw-method').value;
            const amount = parseInt(document.getElementById('withdraw-amount').value);

            if (!accountName || !accountNumber || !amount) {
                showNotification('Please fill all fields', 'error');
                return;
            }

            if (amount < 300) {
                showNotification('Minimum withdrawal amount is RS 300', 'error');
                return;
            }

            try {
                const user = auth.currentUser;
                if (!user) {
                    showNotification('You must be logged in to withdraw', 'error');
                    return;
                }

                // Check if user has sufficient balance
                const userDoc = await getDoc(doc(db, "users", user.uid));
                if (userDoc.exists()) {
                    const userData = userDoc.data();
                    if (userData.balance < amount) {
                        showNotification('Insufficient balance', 'error');
                        return;
                    }

                    // Deduct amount from user's balance immediately
                    await updateDoc(doc(db, "users", user.uid), {
                        balance: userData.balance - amount
                    });

                    // Add withdrawal request to Firestore
                    await addDoc(collection(db, "withdrawals"), {
                        userId: user.uid,
                        userName: userData.name,
                        accountName: accountName,
                        accountNumber: accountNumber,
                        method: method,
                        amount: amount,
                        status: 'pending',
                        createdAt: serverTimestamp()
                    });

                    showNotification('Withdrawal request submitted successfully! Please wait for approval.');
                    withdrawModal.style.display = 'none';
                    
                    // Clear form
                    document.getElementById('withdraw-account-name').value = '';
                    document.getElementById('withdraw-account-number').value = '';
                    document.getElementById('withdraw-amount').value = '';
                    
                    // Refresh balance display
                    balanceAmount.textContent = `RS ${(userData.balance - amount).toFixed(2)}`;
                }
                
            } catch (error) {
                showNotification(error.message, 'error');
            }
        });

        // Submit Customer Service Request
        submitCustomerServiceBtn.addEventListener('click', async () => {
            const subject = document.getElementById('customer-subject').value;
            const message = document.getElementById('customer-message').value;

            if (!subject || !message) {
                showNotification('Please fill all fields', 'error');
                return;
            }

            try {
                const user = auth.currentUser;
                if (!极速赛车开奖结果历史记录) {
                    showNotification('You must be logged in to contact customer service', 'error');
                    return;
                }

                // Get user data
                const userDoc = await getDoc(doc(db, "users", user.uid));
                if (userDoc.exists()) {
                    const userData = userDoc.data();
                    
                    // Add customer service request to Firestore
                    await addDoc(collection(db, "customer_service"), {
                        userId: user.uid,
                        userName: userData.name,
                        userEmail: userData.email,
                        subject: subject,
                        message: message,
                        status: 'new',
                        createdAt: serverTimestamp(),
                        adminEmail: 'kafe2999@gmail.com' // Send to admin
                    });

                    showNotification('Your message has been sent to customer service! We will respond soon.');
                    customerServiceModal.style.display = 'none';
                    
                    // Clear form
                    document.getElementById('customer-subject').value = '';
                    document.getElementById('customer-message').value = '';
                }
                
            } catch (error) {
                showNotification(error.message, 'error');
            }
        });

        // Send Announcement
        sendAnnouncementBtn.addEventListener('click', async () => {
            const title = document.getElementById('announcement-title').value;
            const content = document.getElementById('announcement-content').value;

            if (!title || !content) {
                showNotification('Please fill all fields', 'error');
                return;
            }

            try {
                // Add announcement to Firestore
                await addDoc(collection(db, "announcements"), {
                    title: title,
                    content: content,
                    createdAt: serverTimestamp()
                });

                showNotification('Announcement sent successfully!');
                
                // Clear form
                document.getElementById('announcement-title').value = '';
                document.getElementById('announcement-content').value = '';
                
            } catch (error) {
                showNotification(error.message, 'error');
            }
        });

        // Update Marquee Text
        updateMarqueeBtn.addEventListener('click', async () => {
            const marqueeContent = document.getElementById('marquee-content-input').value;

            if (!marqueeContent) {
                showNotification('Please enter marquee text', 'error');
                return;
            }

            try {
                // Update marquee in Firestore (we'll use a special document for this)
                await setDoc(doc(db, "settings", "marquee"), {
                    text: marqueeContent,
                    updatedAt: serverTimestamp()
                });

                showNotification('Marquee text updated successfully!');
                
                // Update the marquee display immediately
                marqueeText.textContent = marqueeContent;
                
            } catch (error) {
                showNotification(error.message, 'error');
            }
        });

        // Refresh Balance
        refreshBalanceBtn.addEventListener('click', async () => {
            try {
                const user = auth.currentUser;
                if (!user) return;
                
                refreshBalanceBtn.innerHTML = '<极速赛车开奖结果历史记录 class="fas fa-spinner fa-spin"></i>';
                
                // Get updated user data
                const docRef = doc(db, "users", user.uid);
                const docSnap = await getDoc(docRef);

                if (docSnap.exists()) {
                    const userData = docSnap.data();
                    balanceAmount.textContent = `RS ${userData.balance.toFixed(2)}`;
                    showNotification('Balance refreshed');
                }
                
                refreshBalanceBtn.innerHTML = '<i class="fas fa-sync-alt"></i>';
            } catch (error) {
                showNotification(error.message, 'error');
                refreshBalanceBtn.innerHTML = '<i class="fas fa-sync-alt"></i>';
            }
        });

        // Unlock Watch & Earn
        unlockWatchEarnBtn.addEventListener('click', async () => {
            try {
                const user = auth.currentUser;
                if (!user) {
                    showNotification('You must be logged in to unlock this feature', 'error');
                    return;
                }

                // Check if user has sufficient balance
                const userDoc = await getDoc(doc(db, "users", user.uid));
                if (userDoc.exists()) {
                    const userData = userDoc.data();
                    if (userData.balance < 150) {
                        showNotification('Insufficient balance. You need RS 150 to unlock this feature.', 'error');
                        return;
                    }

                    // Deduct RS 150 from user's balance
                    await updateDoc(doc(db, "users", user.uid), {
                        balance: userData.balance - 150,
                        watchAndEarn: true,
                        watchAndEarnExpiry: new Date(Date.now() + 4 * 24 * 60 * 60 * 1000) // 4 days from now
                    });

                    showNotification('Watch & Earn feature unlocked for 4 days!');
                    watchEarnModal.style.display = 'none';
                    
                    // Refresh balance display
                    balanceAmount.textContent = `RS ${(userData.balance - 150).toFixed(2)}`;
                    
                    // Load watch & earn content
                    loadWatchAndEarn();
                }
            } catch (error) {
                showNotification(error.message, 'error');
            }
        });

        // Copy Referral Code
        copyReferralBtn.addEventListener('click', () => {
            const referralCodeInput = document.getElementById('referral-code');
            referralCodeInput.select();
            document.execCommand('copy');
            showNotification('Referral code copied to clipboard!');
        });

        // Bet Options Selection
        betOptions.forEach(option => {
            option.addEventListener('click', () => {
                betOptions.forEach(o => o.classList.remove('selected'));
                option.classList.add('selected');
                currentBet = parseInt(option.getAttribute('data-bet'));
                document.getElementById('selected-bet').textContent = `RS ${currentBet}`;
            });
        });

        // Game Options Selection
        gameOptions.forEach(option => {
            option.addEventListener('click', () => {
                if (currentBet === 0) {
                    showNotification('Please select a bet amount first', 'error');
                    return;
                }

                selectedGame = option.getAttribute('data-game');
                gamesModal.style.display = 'none';

                // Start the selected game
                switch(selectedGame) {
                    case 'scratch':
                        startScratchGame();
                        break;
                    case 'aim':
                        showNotification('Perfect Aim game would start here');
                        break;
                    case 'tower':
                        showNotification('Impossible Tower game would start here');
                        break;
                    case 'fruit':
                        showNotification('Fruit Shooting game would start here');
                        break;
                    case 'tictactoe':
                        showNotification('Tic-Tac-Toe game would start here');
                        break;
                    case 'findace':
                        showNotification('Find Ace game would start here');
                        break;
                }
            });
        });

        // Start Scratch Game
        startScratchBtn.addEventListener('click', () => {
            startScratchGame();
        });

        // Exit Scratch Game
        exitScratchBtn.addEventListener('click', () => {
            scratchGame.style.display = 'none';
            dashboard.style.display = 'block';
            clearInterval(scratchTimerInterval);
        });

        // Check Auth State
        onAuthStateChanged(auth, (user) => {
            if (user) {
                // Check if admin user
                if (['cptanil1995@gmail.com', 'auk5562@gmail.com', 'kafe2999@gmail.com'].includes(user.email)) {
                    showAdminPanel();
                    loadAdminData();
                } else {
                    loadUserData(user.uid);
                }
            } else {
                authContainer.style.display = 'flex';
                dashboard.style.display = 'none';
                adminPanel.style.display = 'none';
            }
        });

        // Load User Data
        async function loadUserData(uid) {
            try {
                const docRef = doc(db, "users", uid);
                const docSnap = await getDoc(docRef);

                if (docSnap.exists()) {
                    const userData = docSnap.data();
                    
                    // Update UI with user data
                    balanceAmount.textContent = `RS ${userData.balance.toFixed(2)}`;
                    userGreeting.textContent = userData.name;
                    usernameDisplay.textContent = userData.name;
                    userAvatar.textContent = userData.name.charAt(0).toUpperCase();
                    
                    // Update VIP badge
                    const vipBadge = document.querySelector('.vip-badge');
                    vipBadge.textContent = `VIP ${userData.vip}`;
                    
                    // Update referral code if needed
                    const referralCodeInput = document.getElementById('referral-code');
                    if (referralCodeInput) {
                        referralCodeInput.value = userData.referralCode || '';
                    }
                    
                    // Update referral stats
                    const referralCount = document.getElementById('referral-count');
                    const referralEarnings = document.getElementById('referral-earnings');
                    if (referralCount && referralEarnings) {
                        referralCount.textContent = userData.referrals || 0;
                        referralEarnings.textContent = `RS ${(userData.referralEarnings || 0).toFixed(2)}`;
                    }
                    
                    // Show dashboard
                    authContainer.style.display = 'none';
                    dashboard.style.display = 'block';
                }

                // Load marquee text
                loadMarqueeText();
            } catch (error) {
                showNotification(error.message, 'error');
            }
        }

        // Load Marquee Text
        async function loadMarqueeText() {
            try {
                const docRef = doc(db, "settings", "marquee");
                const docSnap = await getDoc(docRef);
                
                if (docSnap.exists()) {
                    const data = docSnap.data();
                    marqueeText.textContent = data.text;
                }
            } catch (error) {
                console.error("Error loading marquee text:", error);
            }
        }

        // Load Admin Data
        async function loadAdminData() {
            // Load marquee text for admin panel too
            loadMarqueeText();
        }

        // Load Admin Users
        async function loadAdminUsers() {
            try {
                const usersTableBody = document.getElementById('users-table-body');
                usersTableBody.innerHTML = '<tr><td colspan="5" class="text-center">Loading users...</td></tr>';
                
                const querySnapshot = await getDocs(collection(db, "users"));
                usersTableBody.innerHTML = '';
                
                querySnapshot.forEach((doc) => {
                    const user = doc.data();
                    const row = document.createElement('tr');
                    
                    row.innerHTML = `
                        <td>${user.name || 'N/A'}</td>
                        <td>${user.email || 'N/A'}</td>
                        <td>RS ${user.balance?.toFixed(2) || '0.00'}</td>
                        <td>VIP ${user.vip || 0}</td>
                        <td>
                            <button class="action-btn" data-userid="${doc.id}" data-action="edit">Edit</button>
                        </td>
                    `;
                    
                    usersTableBody.appendChild(row);
                });
                
                // Add event listeners to edit buttons
                setTimeout(() => {
                    document.querySelectorAll('[data-action="edit"]').forEach(btn => {
                        btn.addEventListener('click', () => {
                            const userId = btn.getAttribute('data-userid');
                            editUser(userId);
                        });
                    });
                }, 100);
                
            } catch (error) {
                showNotification(error.message, 'error');
                document.getElementById('users-table-body').innerHTML = '<tr><td colspan="5" class极速赛车开奖结果历史记录"text-center">Error loading users</td></tr>';
            }
        }

        // Edit User (for admin)
        async function editUser(userId) {
            try {
                const userDoc = await极速赛车开奖结果历史记录oc(db, "users", userId));
                if (userDoc.exists()) {
                    const user = userDoc.data();
                    
                    // Create a modal for editing user
                    const modalContent = `
                        <div class="modal-header">
                            <h3 class="modal-title">Edit User: ${user.name}</h3>
                            <button class="close-modal" data-modal="edit-user-modal">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label for="edit-user-balance">Balance</label>
                                <input type="number" id="edit-user-balance" value="${user.balance || 0}" step="0.01">
                            </div>
                            <div class="form-group">
                                <label for="edit-user-v极速赛车开奖结果历史记录">VIP Level</label>
                                <input type="number" id="edit-user-vip" value="${user.vip || 0}" min="0" max="10">
                            </div>
                            <button class="btn btn-primary" id="save-user-changes" data-userid="${userId}">Save Changes</button>
                        </div>
                    `;
                    
                    // Create modal if it doesn't exist
                    let modal = document.getElementById('edit-user-modal');
                    if (!modal) {
                        modal = document.createElement('div');
                        modal.id = 'edit-user-modal';
                        modal.className = 'modal';
                        document.body.appendChild(modal);
                    }
                    
                    modal.innerHTML = `<div class="modal-content">${modalContent}</div>`;
                    modal.style.display = 'block';
                    
                    // Add event listener to save button
                    setTimeout(() => {
                        document.getElementById('save-user-changes').addEventListener('click', async () => {
                            const newBalance = parseFloat(document.getElementById('edit-user-balance').value);
                            const newVip = parseInt(document.getElementById('edit-user-vip').value);
                            
                            try {
                                await updateDoc(doc(db, "users", userId), {
                                    balance: newBalance,
                                    vip: newVip
                                });
                                
                                showNotification('User updated successfully!');
                                modal.style.display = 'none';
                                loadAdminUsers(); // Refresh the users list
                            } catch (error) {
                                showNotification(error.message, 'error');
                            }
                        });
                        
                        // Add event listener to close button
                        document.querySelector('[data-modal="edit-user-modal"]').addEventListener('click', () => {
                            modal.style.display极速赛车开奖结果历史记录'none';
                        });
                    }, 100);
                }
            } catch (error) {
                showNotification(error.message, 'error');
            }
        }

        // Load Admin Deposits
        async function loadAdminDeposits() {
            try {
                const depositsTableBody = document.getElementById('deposits-table-body');
                depositsTableBody.innerHTML = '<tr><td colspan="6" class="text-center">Loading deposits...</td></tr>';
                
                const q = query(collection(db, "deposits"), orderBy("createdAt", "desc"));
                const querySnapshot = await getDocs(q);
                
                depositsTableBody.innerHTML = '';
                
                if (querySnapshot.empty) {
                    depositsTableBody.innerHTML = '<tr><极速赛车开奖结果历史记录 colspan="6" class="text-center">No deposit requests found</td></tr>';
                    return;
                }
                
                querySnapshot.forEach((doc)极速赛车开奖结果历史记录 {
                    const deposit = doc.data();
                    const row = document.createElement('tr');
                    
                    row.innerHTML = `
                        <td>${deposit.userName || 'Unknown'}</td>
                        <td>RS ${deposit.amount?.toFixed(2) || '0.00'}</td>
                        <td>${deposit.method || 'N/A'}</td>
                        <td>${deposit.transactionId || 'N/A'}</td>
                        <td class="status-${deposit.status || 'pending'}">${deposit.status || 'pending'}</td>
                        <td>
                            ${deposit.status === 'pending' ? `
                                <button class="action-btn btn-approve" data-depositid="${doc.id}" data-action="approve-deposit">Approve</button>
                                <button class="action-btn btn-reject" data-depositid="${doc.id}" data-action="reject-deposit">Reject</button>
                            ` : 'Processed'}
                        </td>
                    `;
                    
                    depositsTableBody.appendChild(row);
                });
                
                // Add event listeners to action buttons
                setTimeout(() => {
                    document.querySelectorAll('[data-action="approve-deposit"]').forEach(btn => {
                        btn.addEventListener('click', () => {
                            const depositId = btn.getAttribute('data-depositid');
                            processDeposit(depositId, 'approved');
                        });
                    });
                    
                    document.querySelectorAll('[data-action="reject-deposit"]').forEach(btn => {
                        btn.addEventListener('click', () => {
                            const depositId = btn.getAttribute('data-depositid');
                            processDeposit(depositId, 'rejected');
                        });
                    });
                }, 100);
                
            } catch (error) {
                showNotification(error.message, 'error');
                document.getElementById('deposits-table-body').innerHTML = '<tr><td colspan="6" class="text-center">Error loading deposits</td></tr>';
            }
        }

        // Process Deposit (Approve/Reject)
        async function processDeposit(depositId, status) {
            try {
                // Get the deposit data
                const depositDoc = await getDoc(doc(db, "deposits", depositId));
                if (!depositDoc.exists()) {
                    showNotification('Deposit not found', 'error');
                    return;
                }
                
                const deposit = depositDoc.data();
                
                // Update deposit status
                await updateDoc(doc(db, "deposits", deposit极速赛车开奖结果历史记录), {
                    status: status,
                    processedAt: serverTimestamp()
                });
                
                // If approved, add to user's balance
                if (status === 'approved') {
                    const userDoc = await getDoc(doc(db, "users", deposit.userId));
                    if (userDoc.exists()) {
                        const userData = userDoc.data();
                        await updateDoc(doc(db, "users", deposit.userId), {
                            balance: (userData.balance || 0) + deposit.amount
                        });
                    }
                }
                
                showNotification(`Deposit ${status} successfully!`);
                loadAdminDeposits(); // Refresh the deposits list
                
            } catch (error) {
                showNotification(error.message, 'error');
            }
        }

        // Load Admin Withdrawals
        async function loadAdminWithdrawals() {
            try {
                const withdrawalsTableBody = document.getElementById('withdrawals-table-body');
                withdrawalsTableBody.innerHTML = '<tr><td colspan="6" class="text-center">Loading withdrawals...</td></tr>';
                
                const q = query(collection(db, "withdrawals"), orderBy("created极速赛车开奖结果历史记录", "desc"));
                const querySnapshot = await getDocs(q);
                
                withdrawalsTableBody.innerHTML = '';
                
                if (querySnapshot.empty) {
                    withdrawalsTableBody.innerHTML = '<tr><td colspan="6" class="text-center">No withdrawal requests found</td></tr>';
                    return;
                }
                
                querySnapshot.forEach((doc) => {
                    const withdrawal = doc.data();
                    const row = document.createElement('tr');
                    
                    row.innerHTML = `
                        <td>${withdrawal.userName || 'Unknown'}</td>
                        <td>RS ${withdrawal.amount?.toFixed(2) || '0.00'}</td>
                        <td>${withdrawal.method || 'N/A'}</td>
                        <td>${withdrawal.accountNumber || 'N/A'}</td>
                        <td class="status-${withdrawal.status || 'pending'}">${withdrawal.status || 'pending'}</td>
                        <td>
                            ${withdrawal.status === 'pending' ? `
                                <button class="action-btn btn-approve" data-withdrawalid="${doc.id}" data-action="approve-withdrawal">Approve</button>
                                <button class="action-btn btn-reject极速赛车开奖结果历史记录 data-withdrawalid="${doc.id}" data-action="reject-withdrawal">Reject</button>
                            ` : 'Processed'}
                        </td>
                    `;
                    
                    withdrawalsTableBody.appendChild(row);
                });
                
                // Add event listeners to action buttons
                setTimeout(() => {
                    document.querySelectorAll('[data-action="approve-withdrawal"]').forEach(btn => {
                        btn.addEventListener('click', () => {
                            const withdrawalId = btn.getAttribute('data-withdrawalid');
                            processWithdrawal(withdrawalId, 'approved');
                        });
                    });
                    
                    document.querySelectorAll('[data-action="reject-withdrawal"]').forEach(btn => {
                        btn.addEventListener('click', () => {
                            const withdrawalId = btn.getAttribute('data-withdrawalid');
                            processWithdrawal(withdrawalId, 'rejected');
                        });
                    });
                }, 100);
                
            } catch (error) {
                showNotification(error.message, 'error');
                document.getElementById('withdrawals-table-body').innerHTML = '<tr><td colspan="6" class="text-center">Error loading withdrawals</td></tr>';
            }
        }

        // Process Withdrawal (Approve/Reject)
        async function processWithdrawal(withdrawalId, status) {
            try {
                // Get the withdrawal data
                const withdrawalDoc = await getDoc(doc(db, "withdrawals", withdrawalId));
                if (!withdrawalDoc.exists()) {
                    showNotification('Withdrawal not found', 'error');
                    return;
                }
                
                const withdrawal = withdrawalDoc.data();
                
                // Update withdrawal status
                await updateDoc(doc(db, "withdrawals", withdrawalId), {
                    status: status,
                    processedAt: serverTimestamp()
                });
                
                // If rejected, return funds to user's balance
                if (status === 'rejected') {
                    const userDoc = await getDoc(doc(db, "users", withdrawal.userId));
                    if (userDoc.exists()) {
                        const userData = userDoc.data();
                        await updateDoc(doc(db, "users", withdrawal.userId), {
                            balance: (userData.balance || 0) + withdrawal.amount
                        });
                    }
                }
                
                showNotification(`Withdrawal ${status} successfully!`);
                loadAdminWithdrawals(); // Refresh the withdrawals list
                
            } catch (error) {
                showNotification(error.message, 'error');
            }
        }

        // Load Admin Customer Service Requests
        async function loadAdminCustomerService() {
            try {
                const customerServiceTableBody = document.getElementById('customer-service-table-body');
                customerServiceTableBody.innerHTML = '<tr><td colspan="5" class="text-center">Loading requests...</td></tr>';
                
                const q = query(collection(db, "customer_service"), orderBy("createdAt", "desc"));
                const querySnapshot = await getDocs(q);
                
                customerServiceTableBody.innerHTML = '';
                
                if (querySnapshot.empty) {
                    customerServiceTableBody.innerHTML = '<tr><td colspan="5" class="text-center">No customer service requests found</td></tr>';
                    return;
                }
                
                querySnapshot.forEach((doc) => {
                    const request = doc.data();
                    const row = document.createElement('tr');
                    
                    // Format date
                    const date = request.createdAt ? new Date(request.createdAt.seconds * 1000).toLocaleDateString() : 'N/A';
                    
                    row.innerHTML = `
                        <td>${request.userName || 'Unknown'}</td>
                        <td>${request.subject || 'No Subject'}</td>
                        <td>${request.message ? (request.message.length > 50 ? request.message.substring(0, 50) + '...' : request.message) : 'No Message'}</td>
                        <td>${date}</td>
                        <td class="status-${request.status || 'new'}">${request.status || 'new'}</td>
                    `;
                    
                    customerServiceTableBody.appendChild(row);
                });
                
            } catch (error) {
                showNotification(error.message, 'error');
                document.getElementById('customer-service-table-body').innerHTML = '<tr><td colspan="5" class="text-center">Error loading requests</td></tr>';
            }
        }

        // Show Admin Panel
        function showAdminPanel() {
            authContainer.style.display = 'none';
            dashboard.style.display = 'none';
            adminPanel.style.display = 'block';
        }

        // Show Watch & Earn
        async function showWatchEarn() {
            try {
                const user = auth.currentUser;
                if (!user) {
                    showNotification('You must be logged in to access this feature', 'error');
                    return;
                }

                const userDoc = await getDoc(doc(db, "users", user.uid));
                if (userDoc.exists()) {
                    const userData = userDoc.data();
                    
                    if (userData.watchAndEarn) {
                        // Check if still valid
                        const expiryDate = userData.watchAndEarnExpiry?.toDate();
                        if (expiryDate && expiryDate > new Date()) {
                            // Load watch & earn content
                            loadWatchAndEarn();
                            watchEarnModal.style.display = 'block';
                        } else {
                            // Expired, reset the feature
                            await updateDoc(doc(db, "users", user.uid), {
                                watchAndEarn: false,
                                watchAndEarnExpiry: null
                            });
                            document.getElementById('watch-earn-unlock').style.display = 'block';
                            document.getElementById('watch-earn-content').style.display = 'none';
                            watchEarnModal.style.display = 'block';
                        }
                    } else {
                        document.getElementById('watch-earn-unlock').style.display = 'block';
                        document.getElementById('watch-earn-content').style.display = 'none';
                        watchEarnModal.style.display = 'block';
                    }
                }
            } catch (error) {
                showNotification(error.message, 'error');
            }
        }

        // Load Watch & Earn Content
        async function loadWatchAndEarn() {
            try {
                const user = auth.currentUser;
                if (!user) return;

                const userDoc = await getDoc(doc(db, "users", user.uid));
                if (userDoc.exists()) {
                    const userData = userDoc.data();
                    
                    if (userData.watchAndEarn) {
                        document.getElementById('watch-earn-unlock').style.display = 'none';
                        document.getElementById('watch-earn-content').style.display = 'block';
                        
                        // Calculate time remaining
                        const expiryDate = userData.watchAndEarnExpiry?.toDate();
                        if (expiryDate) {
                            const now = new Date();
                            const diffMs = expiryDate - now;
                            const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));
                            const diffHours = Math.floor((diffMs % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                            
                            document.getElementById('watch-earn-time').textContent = `${diffDays} days, ${diffHours} hours`;
                        }
                        
                        // Load ads
                        const adsContainer = document.querySelector('.ads-container');
                        adsContainer.innerHTML = '';
                        
                        for (let i = 0; i < 10; i++) {
                            const adElement = document.createElement('div');
                            adElement.className = 'ad-item';
                            adElement.innerHTML = `
                                <div style="background: rgba(10, 36, 99, 0.7); padding: 15px; border-radius: 8px; text-align: center;">
                                    <i class="fas fa-ad" style="font-size: 2rem; color: var(--accent);"></i>
                                    <h4>Ad ${i+1}</h4>
                                    <p>Watch this ad to earn RS 1.25</p>
                                    <button class="btn btn-primary watch-ad-btn" data-ad="${i}">Watch Ad</button>
                                </div>
                            `;
                            adsContainer.appendChild(adElement);
                        }
                        
                        // Add event listeners to watch buttons
                        setTimeout(() => {
                            document.querySelectorAll('.watch-ad-btn').forEach(btn => {
                                btn.addEventListener('click', async () => {
                                    const adIndex = btn.getAttribute('data-ad');
                                    
                                    // Simulate watching an ad
                                    btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Watching...';
                                    btn.disabled = true;
                                    
                                    setTimeout(async () => {
                                        // Add RS 1.25 to user's balance
                                        await updateDoc(doc(db, "users", user.uid), {
                                            balance: (userData.balance || 0) + 1.25
                                        });
                                        
                                        showNotification('You earned RS 1.25 for watching the ad!');
                                        btn.innerHTML = 'Watched';
                                        
                                        // Refresh balance display
                                        balanceAmount.textContent = `RS ${((userData.balance || 0) + 1.25).toFixed(2)}`;
                                    }, 3000);
                                });
                            });
                        }, 100);
                    }
                }
            } catch (error) {
                showNotification(error.message, 'error');
            }
        }

        // Show Refer & Earn
        async function showReferEarn() {
            try {
                const user = auth.currentUser;
                if (!user) {
                    showNotification('You must be logged in to access this feature', 'error');
                    return;
                }

                const userDoc = await getDoc(doc(db, "users", user.uid));
                if (userDoc.exists()) {
                    const userData = userDoc.data();
                    
                    // Update referral stats
                    const referralCount = document.getElementById('referral-count');
                    const referralEarnings = document.getElementById('referral-earnings');
                    if (referralCount && referralEarnings) {
                        referralCount.textContent = userData.referrals || 0;
                        referralEarnings.textContent = `RS ${(userData.referralEarnings || 0).toFixed(2)}`;
                    }
                    
                    referEarnModal.style.display = 'block';
                }
            } catch (error) {
                showNotification(error.message, 'error');
            }
        }

        // Show Announcements
        async function showAnnouncements() {
            try {
                const querySnapshot = await getDocs(collection(db, "announcements"));
                let announcementsHTML = '<div style="text-align: center;"><h3>Announcements</h3></div>';
                
                if (querySnapshot.empty) {
                    announcementsHTML += '<p>No announcements found.</p>';
                } else {
                    querySnapshot.forEach((doc) => {
                        const announcement = doc.data();
                        const date = announcement.createdAt ? new Date(announcement.createdAt.seconds * 1000).toLocaleDateString() : 'N/A';
                        
                        announcementsHTML += `
                            <div style="background: rgba(10, 36, 99, 0.5); padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                                <h4>${announcement.title || 'No Title'}</h4>
                                <p>${announcement.content || 'No Content'}</p>
                                <small>Posted on: ${date}</small>
                            </div>
                        `;
                    });
                }
                
                // Create a modal for announcements
                const modalContent = `
                    <div class="modal-header">
                        <h3 class="modal-title">Announcements</h3>
                        <button class="close-modal" data-modal="announcements-modal">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        ${announcementsHTML}
                    </div>
                `;
                
                // Create modal if it doesn't exist
                let modal = document.getElementById('announcements-modal');
                if (!modal) {
                    modal = document.createElement('div');
                    modal.id = 'announcements-modal';
                    modal.className = 'modal';
                    document.body.appendChild(modal);
                }
                
                modal.innerHTML = `<div class="modal-content">${modalContent}</div>`;
                modal.style.display = 'block';
                
                // Add event listener to close button
                setTimeout(() => {
                    document.querySelector('[data-modal="announcements-modal"]').addEventListener('click', () => {
                        modal.style.display = 'none';
                    });
                }, 100);
                
            } catch (error) {
                showNotification(error.message, 'error');
            }
        }

        // Start Scratch Game
        function startScratchGame() {
            dashboard.style.display = 'none';
            scratchGame.style.display = 'block';
            
            // Initialize scratch cards
            scratchCards.innerHTML = '';
            scratchCardValues = [];
            selectedCards = [];
            
            // Create card values (3 cows, 3 hens, 3 ducks)
            const symbols = ['cow', 'hen', 'duck'];
            for (let i = 0; i < 3; i++) {
                for (let j = 0; j < 3; j++) {
                    scratchCardValues.push(symbols[i]);
                }
            }
            
            // Shuffle the cards
            for (let i = scratchCardValues.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [scratchCardValues[i], scratchCardValues[j]] = [scratchCardValues[j], scratchCardValues[i]];
            }
            
            // Create card elements
            for (let i = 0; i < 9; i++) {
                const card = document.createElement('div');
                card.className = 'scratch-card';
                card.setAttribute('data-index', i);
                card.innerHTML = `
                    <div class="scratch-card-front">
                        <i class="fas fa-question"></i>
                    </div>
                    <div class="scratch-card-back">
                        <i class="fas fa-${scratchCardValues[i] === 'cow' ? 'cow' : scratchCardValues[i] === 'hen' ? 'egg' : 'feather'}"></i>
                    </div>
                `;
                
                card.addEventListener('click', () => {
                    if (!scratchGameActive || selectedCards.includes(i)) return;
                    
                    card.classList.add('flipped');
                    selectedCards.push(i);
                    
                    // Check for win condition
                    if (selectedCards.length === 3) {
                        checkScratchWin();
                    }
                });
                
                scratchCards.appendChild(card);
            }
            
            // Reset game state
            scratchGameActive = false;
            startScratchBtn.disabled = false;
            scratchTimer.textContent = '15';
        }

        // Check Scratch Game Win
        async function checkScratchWin() {
            const selectedValues = selectedCards.map(index => scratchCardValues[index]);
            
            // Check if all three selected cards have the same value
            const allSame = selectedValues.every(val => val === selectedValues[0]);
            
            if (allSame) {
                // User wins
                clearInterval(scratchTimerInterval);
                showNotification(`Congratulations! You won RS ${currentBet * 2}!`);
                
                // Add winnings to user's balance
                const user = auth.currentUser;
                if (user) {
                    const userDoc = await getDoc(doc(db, "users", user.uid));
                    if (userDoc.exists()) {
                        const userData = userDoc.data();
                        await updateDoc(doc(db, "users", user.uid), {
                            balance: (userData.balance || 0) + (currentBet * 2)
                        });
                        
                        // Refresh balance display
                        balanceAmount.textContent = `RS ${((userData.balance || 0) + (currentBet * 2)).toFixed(2)}`;
                    }
                }
                
                // Record game history
                await addDoc(collection(db, "game_history"), {
                    userId: user.uid,
                    game: 'scratch',
                    bet: currentBet,
                    win: currentBet * 2,
                    result: 'win',
                    createdAt: serverTimestamp()
                });
                
                // Reset game after delay
                setTimeout(() => {
                    scratchGame.style.display = 'none';
                    dashboard.style.display = 'block';
                }, 3000);
            } else if (selectedCards.length === 3) {
                // User loses
                showNotification('Sorry, you didn\'t match 3 symbols. Try again!');
                
                // Record game history
                const user = auth.currentUser;
                if (user) {
                    await addDoc(collection(db, "game_history"), {
                        userId: user.uid,
                        game: 'scratch',
                        bet: currentBet,
                        win: 0,
                        result: 'loss',
                        createdAt: serverTimestamp()
                    });
                }
                
                // Reset cards after delay
                setTimeout(() => {
                    selectedCards.forEach(index => {
                        const card = document.querySelector(`.scratch-card[data-index="${index}"]`);
                        card.classList.remove('flipped');
                    });
                    selectedCards = [];
                }, 2000);
            }
        }

        // Start Scratch Game Timer
        function startScratchTimer() {
            let timeLeft = 15;
            scratchTimer.textContent = timeLeft;
            
            scratchTimerInterval = setInterval(() => {
                timeLeft--;
                scratchTimer.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(scratchTimerInterval);
                    scratchGameActive = false;
                    showNotification('Time\'s up! Game over.');
                    
                    // Record game history
                    const user = auth.currentUser;
                    if (user) {
                        addDoc(collection(db, "game_history"), {
                            userId: user.uid,
                            game: 'scratch',
                            bet: currentBet,
                            win: 0,
                            result: 'timeout',
                            createdAt: serverTimestamp()
                        });
                    }
                }
            }, 1000);
        }

        // Show Notification
        function showNotification(message, type = 'success') {
            notification.textContent = message;
            notification.classList.remove('error');
            
            if (type === 'error') {
                notification.classList.add('error');
            }
            
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        // Generate Referral Code
        function generateReferralCode() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let code = '';
            for (let i = 0; i < 8; i++) {
                code += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return code;
        }
    </script>
</body>
</html>
